{"version":3,"file":"admin/dist/js/admin-options-test.js","mappings":"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","sources":["webpack:///../vendor/bugquest/web-framework/Assets/js/components/options/OptionBlock.js","webpack:///../vendor/bugquest/web-framework/Assets/js/components/options/IntBlock.js","webpack:///../vendor/bugquest/web-framework/Assets/js/components/options/FloatBlock.js","webpack:///../vendor/bugquest/web-framework/Assets/js/components/options/StringBlock.js","webpack:///../vendor/bugquest/web-framework/Assets/js/components/BuildHelper.js","webpack:///../vendor/bugquest/web-framework/Assets/js/components/Translator.js","webpack:///../vendor/bugquest/web-framework/Assets/js/components/ConfirmDialog.js","webpack:///../vendor/bugquest/web-framework/Assets/js/components/Toast.js","webpack:///../vendor/bugquest/web-framework/Assets/js/components/MediaModalViewer.js","webpack:///../vendor/bugquest/web-framework/Assets/js/components/MediaGallery.js","webpack:///../vendor/bugquest/web-framework/Assets/js/components/options/MediaBlock.js","webpack:///../vendor/bugquest/web-framework/Assets/js/components/options/SelectBlock.js","webpack:///../vendor/bugquest/web-framework/Assets/js/components/options/BoolBlock.js","webpack:///../vendor/bugquest/web-framework/Assets/js/components/options/BlockFactory.js","webpack:///../vendor/bugquest/web-framework/Assets/js/components/options/OptionManager.js","webpack:///../vendor/bugquest/web-framework/Assets/js/components/options/OptionsPage.js","webpack:///./Assets/js/admin/TestOptionsPage.js","webpack:///./Assets/js/admin-options-test.js"],"sourcesContent":["export class OptionBlock {\n    constructor(key, label, value = null, options = {}, onChange = null, group = 'default') {\n        this.key = key;\n        this.label = label;\n        this.value = value;\n        this.options = options;\n        this.type = null;\n        this.onChange = onChange;\n        this.group = group;\n        this.description = this.options?.description || null;\n    }\n\n    render() {\n        const wrapper = document.createElement('div');\n        wrapper.className = 'option-block';\n\n        const descriptionIcon = this.renderDescriptionIcon();\n        if (descriptionIcon) wrapper.appendChild(descriptionIcon);\n\n        return wrapper;\n    }\n\n\n    renderDescriptionIcon() {\n        if (!this.description) return null;\n\n        const icon = document.createElement('span');\n        icon.className = 'option-help';\n        icon.textContent = '?';\n        icon.dataset.tooltip = this.description;\n\n        return icon;\n    }\n\n    notifyChange() {\n        if (typeof this.onChange === 'function')\n            this.onChange(this);\n        else\n            throw new Error('onChange is not assigned or is not a function');\n    }\n}\n","import {OptionBlock} from './OptionBlock.js';\n\nexport class IntBlock extends OptionBlock {\n    constructor(key, label, value = null, options = {}, onChange = null, group = 'default') {\n        super(key, label, value, options, onChange, group);\n        this.type = 'int';\n        this._timeout = null;\n        this._delay = this.options?.delay ?? 2000;\n        this._placeholder = this.options?.placeholder ?? '';\n    }\n\n    render(container) {\n        const wrapper = super.render();\n        wrapper.classList.add('int');\n\n        const label = document.createElement('label');\n        label.textContent = this.label;\n        wrapper.appendChild(label);\n\n        const input = document.createElement('input');\n        input.type = 'number';\n        input.step = '1';\n        input.value = this.value ?? '';\n        if (this._placeholder)\n            input.placeholder = this._placeholder;\n        wrapper.appendChild(input);\n\n        const progress = document.createElement('div');\n        progress.className = 'save-progress';\n        wrapper.appendChild(progress);\n\n        input.addEventListener('input', (e) => {\n            this.value = parseInt(e.target.value)\n            // Réinitialiser progress\n            progress.style.transition = 'none';\n            progress.style.width = '0';\n\n            if (this._timeout) clearTimeout(this._timeout);\n\n            requestAnimationFrame(() => {\n                progress.style.transition = `width ${this._delay}ms linear`;\n                progress.style.width = '100%';\n            });\n\n            this._timeout = setTimeout(() => {\n                this.notifyChange();\n                progress.style.transition = 'none';\n                progress.style.width = '0';\n            }, this._delay);\n        });\n\n        container.appendChild(wrapper);\n    }\n}","import { OptionBlock } from './OptionBlock.js';\n\nexport class FloatBlock extends OptionBlock {\n    constructor(key, label, value = null, options = {}, onChange = null, group = 'default') {\n        super(key, label, value, options, onChange, group);\n        this.type = 'float';\n        this._timeout = null;\n        this._delay = this.options?.delay ?? 2000;\n        this._placeholder = this.options?.placeholder ?? '';\n    }\n\n    render(container) {\n        const wrapper = super.render();\n        wrapper.classList.add('float');\n\n        const label = document.createElement('label');\n        label.textContent = this.label;\n        wrapper.appendChild(label);\n\n        const input = document.createElement('input');\n        input.type = 'number';\n        input.step = 'any';\n        input.placeholder = this._placeholder;\n        input.value = this.value ?? '';\n        wrapper.appendChild(input);\n\n        const progress = document.createElement('div');\n        progress.className = 'save-progress';\n        wrapper.appendChild(progress);\n\n        input.addEventListener('input', (e) => {\n            this.value = parseFloat(e.target.value);\n\n            // Reset barre\n            progress.style.transition = 'none';\n            progress.style.width = '0';\n\n            if (this._timeout) clearTimeout(this._timeout);\n\n            requestAnimationFrame(() => {\n                progress.style.transition = `width ${this._delay}ms linear`;\n                progress.style.width = '100%';\n            });\n\n            this._timeout = setTimeout(() => {\n                this.notifyChange();\n                progress.style.transition = 'none';\n                progress.style.width = '0';\n            }, this._delay);\n        });\n\n        container.appendChild(wrapper);\n    }\n}\n","import {OptionBlock} from './OptionBlock.js';\n\nexport class StringBlock extends OptionBlock {\n    constructor(key, label, value = null, options = {}, onChange = null, group = 'default') {\n        super(key, label, value, options, onChange, group);\n        this.type = 'string';\n        this._timeout = null;\n        this._delay = 2000; // délai avant notification\n        this._delay = this.options?.delay ?? 2000;\n        this._placeholder = this.options?.placeholder ?? '';\n    }\n\n    render(container) {\n        const wrapper = super.render();\n        wrapper.classList.add('string');\n\n        const label = document.createElement('label');\n        label.textContent = this.label;\n        wrapper.appendChild(label);\n\n        const input = document.createElement('input');\n        input.type = 'text';\n        input.value = this.value ?? '';\n        if (this._placeholder)\n            input.placeholder = this._placeholder;\n        wrapper.appendChild(input);\n\n        // Barre de progression\n        const progress = document.createElement('div');\n        progress.className = 'save-progress';\n        wrapper.appendChild(progress);\n\n        input.addEventListener('input', (e) => {\n            this.value = e.target.value;\n\n            // Reset animation de la barre\n            progress.style.transition = 'none';\n            progress.style.width = '0';\n\n            // Reset le timeout précédent\n            if (this._timeout) {\n                clearTimeout(this._timeout);\n            }\n\n            // Lancer animation\n            requestAnimationFrame(() => {\n                progress.style.transition = `width ${this._delay}ms linear`;\n                progress.style.width = '100%';\n            });\n\n            // Nouvelle mise à jour différée\n            this._timeout = setTimeout(() => {\n                this.notifyChange();\n                progress.style.transition = 'none';\n                progress.style.width = '0';\n            }, this._delay);\n        });\n\n        container.appendChild(wrapper);\n    }\n}\n","export default class BuildHelper {\n\n    static accordion(title, subclass) {\n        let accordeon = document.createElement('div');\n        accordeon.className = '__accordeon accordeon';\n        if (subclass)\n            accordeon.classList.add(subclass);\n\n        let accordeon_title = document.createElement('div');\n        accordeon_title.className = '__accordeon_title accordeon-title';\n        accordeon_title.textContent = title;\n        accordeon.appendChild(accordeon_title);\n\n        let accordeon_content = document.createElement('div');\n        accordeon_content.className = 'accordeon-content';\n        accordeon.appendChild(accordeon_content);\n\n        return {accordeon, accordeon_content};\n    }\n\n    static glow_stick() {\n        let glow_stick = document.createElement('div');\n        glow_stick.className = 'glow-bar';\n        return glow_stick;\n    }\n\n    static input_text(placeholder = '', value = '', className = '') {\n        let input = document.createElement('input');\n        input.type = 'text';\n        input.placeholder = placeholder;\n        input.value = value;\n        input.className = className;\n        return input;\n    }\n\n    static button_submit(text = 'Envoyer', className = 'button button-primary') {\n        let button = document.createElement('button');\n        button.type = 'submit';\n        button.className = className;\n        button.textContent = text;\n        return button;\n    }\n\n    static button(text = 'Button', className = 'button', onClick = null) {\n        let button = document.createElement('div');\n        button.className = className;\n        button.textContent = text;\n        if (onClick)\n            button.addEventListener('click', onClick);\n        return button;\n    }\n\n    static div(className = '') {\n        let div = document.createElement('div');\n        div.className = className;\n        return div;\n    }\n\n    static modal(title = '', onClose = null) {\n        let modal = this.div('modal');\n        let wrapper = this.div('modal-wrapper');\n        let close = this.div('modal-close');\n        let content = this.div('modal-content');\n\n        if (title) {\n            let titleElement = this.div('modal-title');\n            titleElement.textContent = title;\n            modal.appendChild('titleElement');\n        }\n\n        wrapper.appendChild(close)\n        wrapper.appendChild(content)\n        modal.appendChild(wrapper)\n\n        close.addEventListener('click', () => {\n            modal.classList.remove('active');\n            if (onClose) onClose();\n        });\n\n        modal.addEventListener('click', (e) => {\n            // Close the modal if the user clicks outside of the content area, check children\n            if (e.target === modal) {\n                modal.classList.remove('active');\n                if (onClose) onClose();\n            }\n        });\n\n        return {modal, content, close};\n    }\n\n    static h2(content, className = '') {\n        let h2 = document.createElement('h2');\n        h2.className = className;\n        h2.textContent = content;\n        return h2;\n    }\n\n    static h3(content, className = '') {\n        let h3 = document.createElement('h3');\n        h3.className = className;\n        h3.textContent = content;\n        return h3;\n    }\n\n    static img(src, alt = '', className = '') {\n        let img = document.createElement('img');\n        img.src = src;\n        img.alt = alt;\n        if (className) img.className = className;\n        return img;\n    }\n\n    static list(items = [], className = '') {\n        let ul = document.createElement('ul');\n        ul.className = className;\n\n        items.forEach(item => {\n            let li = document.createElement('li');\n            li.innerHTML = item;\n            ul.appendChild(li);\n        });\n\n        return ul;\n    }\n\n    static search(placeholder = 'Rechercher...', onSearch = null, onClickItem = null, searchMinLength = 2, openBottom = false) {\n        let searchContainer = this.div('search-container');\n        let input = this.input_text(placeholder);\n        input.type = 'search';\n        let results = this.div('search-results ' + (openBottom ? ' open-bottom' : 'open-top'));\n        searchContainer.appendChild(input);\n        searchContainer.appendChild(results);\n        if (onSearch)\n            input.addEventListener('input', () => {\n                let value = input.value;\n                if (value.length >= searchMinLength)\n                    onSearch(value, results);\n                else\n                    results.innerHTML = '';\n\n            });\n\n        if (onClickItem)\n            results.addEventListener('click', (e) => {\n                let item = e.target.closest('.result-item');\n                if (item)\n                    onClickItem(item);\n            });\n\n        //add custom event to close the search results\n        searchContainer.addEventListener('close', () => {\n            results.innerHTML = '';\n            input.value = '';\n        });\n\n        return {searchContainer, results};\n    }\n\n    static input_search(placeholder = '', className = '', onSearch = null, onEmpty = null, searchMinLength = 2) {\n        let input = this.input_text(placeholder, '', className);\n        input.type = 'search';\n        input.addEventListener('input', () => {\n            let value = input.value;\n            if (value.length >= searchMinLength)\n                onSearch(value);\n            else\n                onEmpty();\n        });\n\n        return input;\n    }\n}","export class Translator {\n    static _domains = {};\n    static _loaded = {};\n\n    static async load(domain) {\n        if (this._loaded[domain]) return;\n\n        try {\n            const response = await fetch(`/admin/locale/domain/get/${domain}`);\n            if (!response.ok) throw new Error(`Error for domain: ${domain}`);\n            const data = await response.json();\n            this._domains[domain] = data;\n            this._loaded[domain] = true;\n            return data;\n        } catch (error) {\n            console.error(`[Translator] ${error.message}`);\n        }\n\n        return null;\n    }\n\n    static async translate(key, domain = 'bugquest', replacements = {}) {\n        domain = domain.trim();\n        key = key.trim();\n        if (!this._loaded[domain]) await this.load(domain);\n\n        let translation = this._domains[domain]?.[key] ?? key;\n        return this._applyReplacements(translation, replacements);\n    }\n\n    static t(key, domain = 'bugquest', replacements = {}) {\n        let translation = this._domains[domain]?.[key] ?? key;\n        return this._applyReplacements(translation, replacements);\n    }\n\n    static _applyReplacements(str, replacements) {\n        return str.replace(/{(.*?)}/g, (match, token) => {\n            return replacements[token] ?? match;\n        });\n    }\n}\n\nexport function __(key, domain = 'bugquest', replacements = {}) {\n    return Translator.t(key, domain, replacements);\n}\n","import BuildHelper from './BuildHelper.js';\nimport {__} from './Translator.js';\n\nexport default class ConfirmDialog {\n    static show(\n        onConfirm = () => {\n        },\n        onCancel = () => {\n        },\n        options = {}\n    ) {\n        const defaults = {\n            title: __('Confirmation', 'admin'),\n            message: __('Êtes-vous sûr de vouloir continuer ?', 'admin'),\n            confirmText: __('Valider', 'admin'),\n            cancelText: __('Annuler', 'admin'),\n            confirmClass: 'button success',\n            cancelClass: 'button danger'\n        };\n\n        const {title, message, confirmText, cancelText, confirmClass, cancelClass} = {...defaults, ...options};\n\n        const title_el = BuildHelper.div('confirm-title');\n        title_el.textContent = title;\n\n        const overlay_el = BuildHelper.div('confirm-overlay');\n        const box_el = BuildHelper.div('confirm-box');\n\n        const message_el = BuildHelper.div('confirm-message');\n        message_el.textContent = message;\n\n        const actions_el = BuildHelper.div('confirm-actions');\n\n        const confirm_el = BuildHelper.button(confirmText, confirmClass, () => {\n            onConfirm();\n            overlay_el.remove();\n        })\n\n        const cancel_el = BuildHelper.button(cancelText, cancelClass, () => {\n            onCancel();\n            overlay_el.remove();\n        })\n\n        actions_el.append(confirm_el, cancel_el);\n        box_el.append(title_el, message_el, actions_el);\n        overlay_el.appendChild(box_el);\n        document.body.appendChild(overlay_el);\n\n        setTimeout(() => overlay_el.classList.add('active'), 10);\n    }\n}\n","export class Toast {\n    static containers = new Map();\n\n    static show(message, {\n        type = 'info',\n        position = 'top-right',\n        duration = 4000,\n        icon = null,\n        closable = true\n    } = {}) {\n        const container = this._getContainer(position);\n\n        const toast = document.createElement('div');\n        toast.className = `bq-toast ${type}`;\n        toast.innerHTML = `\n            ${icon ? `<div class=\"bq-toast-icon\">${icon}</div>` : ''}\n            <div class=\"bq-toast-message\">${message}</div>\n            ${closable ? `<button class=\"bq-toast-close\" title=\"Fermer\">✖</button>` : ''}\n        `;\n\n        if (closable) {\n            toast.querySelector('.bq-toast-close').addEventListener('click', () => this._removeToast(toast));\n        }\n\n        container.appendChild(toast);\n\n        // Animation d’apparition\n        requestAnimationFrame(() => {\n            toast.classList.add('show');\n        });\n\n        if (duration > 0) {\n            setTimeout(() => this._removeToast(toast), duration);\n        }\n    }\n\n    static _getContainer(position) {\n        if (!this.containers.has(position)) {\n            const container = document.createElement('div');\n            container.className = `bq-toast-container ${position}`;\n            document.body.appendChild(container);\n            this.containers.set(position, container);\n        }\n        return this.containers.get(position);\n    }\n\n    static _removeToast(toast) {\n        toast.classList.remove('show');\n        setTimeout(() => toast.remove(), 300);\n    }\n}","import BuildHelper from \"./BuildHelper\";\nimport ConfirmDialog from \"./ConfirmDialog\";\nimport {Toast} from \"./Toast\";\nimport {__} from './Translator.js';\n\nexport default class MediaModalViewer {\n    constructor(gallery) {\n        this.gallery = gallery;\n        this.waitingTags = [];\n        this.deletionMode = false;\n        this.new_tag = '';\n\n        const {modal, content, close} = BuildHelper.modal(null, () => {\n            this.gallery.loadPage();\n            this.waitingTags = [];\n            this.deletionMode = false;\n            content.innerHTML = '';\n        });\n\n        this.modal = modal;\n        this.modal_content = content;\n        document.body.appendChild(this.modal);\n    }\n\n    async open(media) {\n        if (!media) return;\n\n        this.waitingTags = media.tags ? JSON.parse(JSON.stringify(media.tags)) : [];\n        this.deletionMode = false;\n        this.modal_content.innerHTML = '';\n\n        const container = BuildHelper.div('media-modal');\n\n        container.appendChild(this.buildActions(media));\n        container.appendChild(this.buildPreview(media));\n\n        const info = BuildHelper.div('media-modal--info');\n        const infoContainer = BuildHelper.div('media-modal--info-container');\n\n        const title = BuildHelper.h2(media.original_name);\n        const infoSub = BuildHelper.div();\n        const list = BuildHelper.list([`<strong>Type :</strong> ${media.mime_type}`, `<strong>Taille :</strong> ${(media.size / 1024).toFixed(1)} ko`, `<strong>Extension :</strong> ${media.extension}`, `<strong>Ajouté le :</strong> ${new Date(media.created_at).toLocaleDateString('fr-FR')}`,]);\n\n        infoSub.appendChild(title);\n        infoSub.appendChild(list);\n        infoContainer.appendChild(infoSub);\n\n        infoContainer.appendChild(this.buildTagEditor(media));\n        info.appendChild(infoContainer);\n\n        if (media.exif && typeof media.exif === 'object' && Object.keys(media.exif).length > 0) {\n            const {accordeon, accordeon_content} = BuildHelper.accordion('EXIF', 'small');\n            const exifList = BuildHelper.list(Object.entries(media.exif).map(([key, value]) => `<strong>${key}:</strong> ${typeof value === 'object' ? JSON.stringify(value) : value}`));\n            exifList.classList.add('media-modal--exif');\n            accordeon_content.appendChild(exifList);\n            info.appendChild(accordeon);\n        }\n\n        container.appendChild(info);\n        this.modal_content.appendChild(container);\n        this.modal.classList.add('active');\n    }\n\n    buildTagUpdateButton(media) {\n        const button = BuildHelper.div('icon info hidden');\n        button.innerHTML = '💾';\n        button.dataset.tooltip = __('Mettre à jour les tags', 'admin');\n        button.dataset.tooltipType = 'info';\n\n        button.onclick = async () => {\n\n            let tagIds = this.waitingTags.map(tag => tag.id);\n\n            const encoded = tagIds.map(id => `tags[]=${encodeURIComponent(id)}`).join('&');\n\n            this.deletionMode = false;\n            this.tagDeleteBtn.classList.remove('active');\n\n            try {\n                const res = await fetch(`${this.gallery.apiUrl}/tags/set/${media.id}`, {\n                    method: 'POST', headers: {\n                        'Content-Type': 'application/x-www-form-urlencoded',\n                    }, body: encoded\n                });\n\n                if (!res.ok) throw new Error(`HTTP ${res.status}`);\n\n                this.waitingTags.forEach(tag => {\n                    if (\"new\" in tag && tag.new) delete tag.new;\n                });\n                media.tags = JSON.parse(JSON.stringify(this.waitingTags));\n                this.updateTagList()\n                this.updateTagButtonVisibility()\n                Toast.show(__('Tags mis à jour', 'admin'), {\n                    type: 'success', icon: '✅', duration: 2000, position: 'bottom-right', closable: true\n                })\n\n            } catch (err) {\n                Toast.show('[MediaModalViewer] ' + __('Erreur mise à jour des tags :', 'admin') + ' ' + err.message, {\n                    type: 'danger', icon: '⚠️', duration: 5000, position: 'bottom-right', closable: true\n                })\n                console.error('[MediaModalViewer] ' + __('Erreur mise à jour des tags :', 'admin'), err);\n            }\n        };\n\n        return button;\n    }\n\n    buildTagDeleteToggle(media) {\n        const button = BuildHelper.div('icon danger');\n        button.innerHTML = '❌';\n        button.dataset.tooltip = __('Mode suppression', 'admin');\n        button.dataset.tooltipType = 'danger';\n\n        button.onclick = () => {\n            this.deletionMode = !this.deletionMode;\n\n            //if close delete mode, reset tags to original and keep new tags at end\n            if (!this.deletionMode) {\n                const newTags = this.waitingTags.filter(tag => (\"new\" in tag && tag.new));\n                this.waitingTags = media.tags ? JSON.parse(JSON.stringify(media.tags)) : [];\n                this.waitingTags.push(...newTags);\n                this.updateTagList();\n                this.updateTagButtonVisibility()\n            }\n\n            button.classList.toggle('active', this.deletionMode);\n        };\n\n        return button;\n    }\n\n    buildAddCategoryButton(media) {\n        const button = BuildHelper.div('icon hidden');\n        button.innerHTML = '➕';\n        button.dataset.tooltip = __('Ajouter une nouvelle catégorie', 'admin');\n        button.dataset.tooltipType = 'info';\n\n        button.onclick = async () => {\n\n            if (!this.new_tag || this.new_tag.length < 3) return;\n\n            //check if tag already exists\n            const tagExists = this.gallery.tags.find(tag => tag.name.toLowerCase() === this.new_tag.toLowerCase());\n            if (tagExists) return;\n\n            try {\n                const response = await fetch(`${this.gallery.apiUrl}/tags/add`, {\n                    method: 'POST',\n                    headers: {\n                        \"Content-Type\": \"application/x-www-form-urlencoded\",\n                    },\n                    body: 'name=' + encodeURIComponent(this.new_tag),\n                });\n\n                this.search.dispatchEvent(new Event('close'));\n                this.new_tag = '';\n                this.tagAddBtn.classList.add('hidden')\n\n                if (!response.ok) throw new Error(`HTTP ${response.status}`);\n\n                const tag = await response.json();\n                this.gallery.tags.push(tag);\n                this.gallery.renderTags();\n                tag.new = true;\n                this.waitingTags.push(tag);\n                this.updateTagList();\n                this.updateTagButtonVisibility();\n            } catch (err) {\n                Toast.show('[MediaModalViewer] ' + __(\"Erreur d'ajout de tag :\", 'admin') + ' ' + err.message, {\n                    type: 'danger',\n                    icon: '⚠️',\n                    duration: 5000,\n                    position: 'bottom-right',\n                    closable: true\n                })\n                console.error('[MediaModalViewer] ' + __(\"Erreur d'ajout de tag :\", 'admin'), err);\n            }\n        };\n\n        return button;\n    }\n\n    buildTagEditor(media) {\n        const tagsContainer = BuildHelper.div('media-modal--tags');\n        const tagList = BuildHelper.div('media-modal--tags-list');\n        const tagActions = BuildHelper.div('media-modal--tags-actions');\n\n        this.tagUpdateBtn = this.buildTagUpdateButton(media);\n        this.tagAddBtn = this.buildAddCategoryButton(media);\n        this.tagDeleteBtn = this.buildTagDeleteToggle(media);\n        tagActions.append(this.tagUpdateBtn, this.tagDeleteBtn, this.tagAddBtn);\n\n        this.updateTagButtonVisibility = () => {\n            //check if waintingTags is different from media.tags, ignore order, check only ids\n            const waitingTagIds = this.waitingTags.map(tag => tag.id);\n            const mediaTagIds = media.tags.map(tag => tag.id);\n            const isDifferent = waitingTagIds.length !== mediaTagIds.length || waitingTagIds.some(id => !mediaTagIds.includes(id));\n\n            if (isDifferent)\n                this.tagUpdateBtn.classList.remove('hidden');\n            else\n                this.tagUpdateBtn.classList.add('hidden');\n        };\n\n        this.updateTagList = () => {\n            tagList.innerHTML = '';\n            this.waitingTags.forEach(tag => {\n                const tagEl = BuildHelper.div('tag');\n                tagEl.textContent = tag.name;\n                tagEl.dataset.tag = tag.id;\n\n                if (tag.new) {\n                    tagEl.classList.add('new');\n                    tagEl.dataset.tooltip = __('Cliquez pour supprimer', 'admin');\n                    tagEl.dataset.tooltipType = 'info';\n                }\n\n                tagEl.onclick = () => {\n                    if (!this.deletionMode) return;\n\n                    this.waitingTags = this.waitingTags.filter(t => t.id !== tag.id);\n                    tagEl.remove();\n                    this.updateTagButtonVisibility();\n                };\n\n                tagList.appendChild(tagEl);\n            });\n        };\n\n        this.updateTagList();\n\n        const {searchContainer, result} = BuildHelper.search(\n            __('Ajouter un tag', 'admin') + '...',\n            (value, results_el) => {\n                this.new_tag = value;\n                results_el.innerHTML = '';\n                const filtered =\n                    this.gallery.tags.filter(tag => tag.name.toLowerCase().includes(value.toLowerCase())\n                        && !media.tags.some(t => t.id === tag.id)\n                        && !this.waitingTags.some(t => t.id === tag.id));\n\n                if (filtered.length) {\n                    this.tagAddBtn.classList.add('hidden');\n                    results_el.classList.add('active');\n                } else {\n                    this.tagAddBtn.classList.remove('hidden');\n                    results_el.classList.remove('active');\n                }\n\n                filtered.forEach(tag => {\n                    const tagEl = BuildHelper.div('result-item');\n                    tagEl.textContent = tag.name;\n                    tagEl.dataset.tag = tag.id;\n                    results_el.appendChild(tagEl);\n                });\n            },\n            (item) => {\n                const tagId = parseInt(item.dataset.tag);\n                const tag = this.gallery.tags.find(t => t.id === tagId);\n                if (!tag) return;\n\n                tag.new = true;\n                this.waitingTags.push(tag);\n\n                searchContainer.dispatchEvent(new Event('close'));\n                this.updateTagList();\n                this.updateTagButtonVisibility();\n            }, 2);\n        this.search = searchContainer;\n\n        tagsContainer.append(tagActions, tagList, searchContainer);\n        return tagsContainer;\n    }\n\n    buildActions(media) {\n        const actions = BuildHelper.div('flex-actions');\n\n        const dl = BuildHelper.div('icon');\n        dl.innerHTML = '📥';\n        dl.dataset.tooltip = __('Télécharger', 'admin');\n        dl.dataset.tooltipType = 'info';\n        dl.onclick = async () => {\n            const blob = await (await fetch('/' + media.path)).blob();\n            const url = URL.createObjectURL(blob);\n            const link = document.createElement('a');\n            link.href = url;\n            link.download = media.original_name;\n            document.body.appendChild(link);\n            link.click();\n            document.body.removeChild(link);\n        };\n\n        const open = BuildHelper.div('icon');\n        open.innerHTML = '🔗';\n        open.dataset.tooltip = __('Ouvrir', 'admin');\n        open.dataset.tooltipType = 'info';\n        open.onclick = () => window.open('/' + media.path, '_blank');\n\n        const del = BuildHelper.div('icon danger');\n        del.innerHTML = '🗑️';\n        del.dataset.tooltip = __('Supprimer', 'admin');\n        del.dataset.tooltipType = 'danger';\n        del.onclick = async () => {\n\n            ConfirmDialog.show(async () => {\n                try {\n                    const res = await fetch(`${this.gallery.apiUrl}/delete/${media.id}`, {method: 'DELETE'});\n                    if (!res.ok) throw new Error(`HTTP ${res.status}`);\n                    this.gallery.loadPage();\n                    Toast.show(__('Média supprimé', 'admin'), {\n                        type: 'success', icon: '✅', duration: 2000, position: 'bottom-right', closable: true\n                    });\n                    this.close();\n                } catch (e) {\n                    Toast.show('[MediaModalViewer] ' + __('Erreur suppression média :', 'admin') + ' ' + e.message, {\n                        type: 'danger', icon: '⚠️', duration: 5000, position: 'bottom-right', closable: true\n                    });\n                    console.error('[MediaModalViewer] ' + __('Erreur suppression média :', 'admin'), e);\n                }\n            }, () => null, {\n                title: __('Supprimer ce média ?', 'admin'),\n                message: __('Cette action est irréversible. Êtes-vous sûr de vouloir continuer ?', 'admin'),\n                confirmText: __('Supprimer', 'admin'),\n                cancelText: __('Annuler', 'admin'),\n                confirmClass: 'button danger',\n                cancelClass: 'button info',\n            });\n        };\n\n        actions.append(dl, open, del);\n        return actions;\n    }\n\n    buildPreview(media) {\n        const preview = BuildHelper.div('media-modal--preview');\n        if (media.mime_type.startsWith('image/')) {\n            preview.appendChild(BuildHelper.img('/' + media.path, media.original_name));\n        }//svg\n        else if (media.mime_type.startsWith('image/svg')) {\n            const svg = BuildHelper.img('/' + media.path, media.original_name);\n            preview.appendChild(svg);\n        } else {\n            const icon = BuildHelper.div('media-card--icon');\n            icon.innerHTML = this.gallery.getIconForMime(media.mime_type);\n            preview.appendChild(icon);\n        }\n        return preview;\n    }\n\n    close() {\n        this.modal.classList.remove('active');\n        this.modal_content.innerHTML = '';\n    }\n}\n","import BuildHelper from './BuildHelper.js';\nimport MediaModalViewer from './MediaModalViewer.js';\nimport {Toast} from \"./Toast\";\nimport {__} from './Translator.js';\nimport ConfirmDialog from \"./ConfirmDialog\";\n\nexport default class MediaGallery {\n    constructor(element) {\n        this.element = element;\n\n        this.canUpload = false;\n        this.canModal = false;\n        this.onClickItem = null;\n        this.canEditTags = false;\n        this.deletionMode = false;\n        this.perPage = 12;\n        this.selectTags = [];\n        this.tags = [];\n        this.mimeTypes = [];\n        this.forced_mimeTypes = [];\n        this.search = '';\n        //check if element has data-per-page attribute\n        const perPage = this.element.dataset.perPage;\n        if (perPage && !isNaN(perPage))\n            this.perPage = parseInt(perPage, 10);\n\n        const canUpload = this.element.dataset.canUpload;\n        if (canUpload && canUpload === 'true')\n            this.canUpload = true;\n\n        const canModal = this.element.dataset.canModal;\n        if (canModal && canModal === 'true')\n            this.canModal = true;\n\n        const canEditTags = this.element.dataset.canEditTags;\n        if (canEditTags && canEditTags === 'true')\n            this.canEditTags = true;\n\n        const forcedMimeTypes = this.element.dataset.forcedMimeTypes;\n        if (forcedMimeTypes && forcedMimeTypes.length > 0) {\n            this.forced_mimeTypes = forcedMimeTypes.split(',').map(mime => mime.trim());\n        }\n\n        this.apiUrl = '/admin/medias';\n\n        this.buildElements();\n        this.initEvents();\n        this.loadTags();\n        this.loadPage();\n    }\n\n    buildElements() {\n\n        //====== DROPZONE ======\n        if (this.canUpload) {\n            this.dropZone = BuildHelper.div('media-dropzone');\n            this.element.appendChild(this.dropZone);\n        }\n\n        //====== TAGS ======\n        const tags = BuildHelper.div('media-gallery-tags');\n        this.element.appendChild(tags);\n\n        if (this.canEditTags) {\n            //====== TAGS FORM / ACCORDION ======\n            const {\n                accordeon,\n                accordeon_content\n            } = BuildHelper.accordion(__('Ajouter des tags', 'admin'), 'small');\n            tags.appendChild(accordeon);\n            tags.appendChild(BuildHelper.glow_stick());\n\n            const tags_form = BuildHelper.div('media-gallery-tags-form');\n            accordeon_content.appendChild(tags_form);\n\n            this.tag_input = BuildHelper.input_text(__('Ajouter un tag', 'admin'), '', 'small full');\n\n            tags_form.appendChild(this.tag_input)\n            this.tag_submit = BuildHelper.button_submit(__('Ajouter', 'admin'), 'button button-primary');\n            this.tag_submit.addEventListener('click', (e) => {\n                e.preventDefault();\n                this.deletionMode = false;\n                tagDeleteBtn.classList.remove('active');\n                this.search = '';\n                this.updateTags();\n                const tag = this.tag_input.value.trim();\n                if (tag) {\n                    this.addTag(tag);\n                    this.tag_input.value = '';\n                }\n            })\n            tags_form.appendChild(this.tag_submit);\n        }\n\n        //====== TAGS ACTIONS/SEARCH ======\n        const tags_actions = BuildHelper.div('media-gallery-tags-actions');\n        tags.appendChild(tags_actions);\n\n\n        const search = BuildHelper.input_search(\n            __('Rechercher', 'admin') + '...',\n            'small',\n            (value) => {\n                this.search = value\n                this.updateTags()\n            },\n            () => {\n                this.search = '';\n                this.updateTags()\n            });\n\n\n        tags_actions.appendChild(search);\n\n        if (this.canEditTags) {\n            const tagDeleteBtn = this.buildTagDeleteToggle();\n            tags_actions.appendChild(tagDeleteBtn);\n        }\n\n        //====== TAGS CONTENT ======\n        this.tags_content = BuildHelper.div('media-gallery-tags-content');\n        tags.appendChild(this.tags_content)\n\n        //====== MEDIA GALLERY ======\n        const container = BuildHelper.div('fullw');\n        this.element.appendChild(container);\n\n        this.grid = BuildHelper.div('media-gallery-content');\n        container.appendChild(this.grid);\n\n        this.pagination = BuildHelper.div('media-gallery-pagination');\n        container.appendChild(this.pagination)\n\n        if (this.canModal)\n            this.modal = new MediaModalViewer(this)\n    }\n\n    buildTagDeleteToggle(media) {\n        const button = BuildHelper.div('icon danger');\n        button.innerHTML = '❌';\n        button.dataset.tooltip = __('Mode suppression', 'admin');\n        button.dataset.tooltipType = 'danger';\n\n        button.onclick = () => {\n            this.deletionMode = !this.deletionMode;\n\n            if (this.deletionMode) {\n                this.selectTags = [];\n                this.updateTags();\n                this.loadPage()\n            }\n\n            button.classList.toggle('active', this.deletionMode);\n        };\n\n        return button;\n    }\n\n    initEvents() {\n        this.pagination.addEventListener('click', (e) => {\n            const index = e.target.closest('span[data-page]');\n            if (index) {\n                e.preventDefault();\n                const page = parseInt(index.dataset.page, 10);\n                if (!isNaN(page))\n                    this.loadPage(page);\n            }\n        });\n\n        this.tags_content.addEventListener('click', (e) => {\n            e.preventDefault();\n            const tag = e.target.closest('span[data-tag]');\n            if (!tag) return;\n\n            const id = tag.dataset.tag;\n\n            if (!id) return;\n\n            if (this.deletionMode) {\n                ConfirmDialog.show(async () => {\n                        const response = await fetch(`${this.apiUrl}/tags/delete/${id}`, {\n                            method: 'DELETE',\n                            headers: {\n                                \"Content-Type\": \"application/x-www-form-urlencoded\",\n                            },\n                        });\n\n                        if (!response.ok) throw new Error(`HTTP ${response.status}`);\n\n                        const result = await response.json();\n                        tag.remove();\n                        this.loadPage()\n                        Toast.show(__('Tag supprimé avec succès', 'admin'), {\n                            type: 'success',\n                            icon: '✅',\n                            duration: 5000,\n                            position: 'bottom-right',\n                            closable: true\n                        })\n                    },\n                    () => null,\n                    {\n                        title: __('Supprimer ce tag ?', 'admin'),\n                        message: __('Cette action est irréversible. Êtes-vous sûr de vouloir continuer ?', 'admin'),\n                        confirmText: __('Supprimer', 'admin'),\n                        cancelText: __('Annuler', 'admin'),\n                        confirmClass: 'button danger',\n                        cancelClass: 'button info',\n                    });\n\n                return;\n            }\n\n            if (this.selectTags.includes(id))\n                this.selectTags.splice(this.selectTags.indexOf(id), 1);\n            else\n                this.selectTags.push(id)\n\n            this.updateTags();\n            this.loadPage(1);\n\n        });\n\n        if (this.canUpload) {\n            this.element.addEventListener('dragover', (e) => {\n                e.preventDefault();\n                this.dropZone.classList.add('active');\n            });\n\n            this.element.addEventListener('dragleave', (e) => {\n                if (e.relatedTarget === null || !this.dropZone.contains(e.relatedTarget)) {\n                    this.dropZone.classList.remove('active');\n                }\n            });\n\n            this.element.addEventListener('drop', (e) => {\n                e.preventDefault();\n                this.dropZone.classList.remove('active');\n                const files = [...e.dataTransfer.files];\n                for (let file of files)\n                    this.uploadFile(file);\n            });\n        }\n\n\n        this.element.addEventListener('click', (e) => {\n            const card = e.target.closest('.__media_card');\n            if (card) {\n                try {\n                    const media = JSON.parse(card.dataset.media)\n\n                    if (typeof this.onClickItem === 'function')\n                        this.onClickItem(media);\n\n                    if (this.canModal)\n                        this.modal.open(media)\n                } catch (err) {\n                    Toast.show(__('Erreur de parsing du média :', 'admin') + ' ' + err.message, {\n                        type: 'danger',\n                        icon: '⚠️',\n                        duration: 5000,\n                        position: 'bottom-right',\n                        closable: true\n                    })\n                    console.error(__('Erreur de parsing du média :', 'admin'), err);\n                    return;\n                }\n            }\n        });\n\n    }\n\n    async loadPage(page = 1) {\n        try {\n            const params = new URLSearchParams();\n            params.set('per_page', this.perPage);\n\n            this.selectTags.forEach(tagId => {\n                params.append('tags[]', tagId);\n            });\n\n            if(this.forced_mimeTypes)\n                this.forced_mimeTypes.forEach(mime => {\n                    params.append('mime_types[]', mime);\n                });\n\n            const response = await fetch(\n                `${this.apiUrl}/all/${page}?${params}`\n            );\n\n            if (!response.ok) throw new Error(`HTTP ${response.status}`);\n\n            const result = await response.json();\n            this.renderMedia(result.items);\n            this.renderPagination(result.current_page, result.last_page);\n        } catch (err) {\n            Toast.show('[MediaGalleryLoader] ' + __('Erreur de chargement des médias :', 'admin') + ' ' + err.message, {\n                type: 'danger',\n                icon: '⚠️',\n                duration: 5000,\n                position: 'bottom-right',\n                closable: true\n            })\n            console.error('[MediaGalleryLoader] ' + __('Erreur de chargement des médias :', 'admin'), err);\n        }\n    }\n\n    async loadTags() {\n        try {\n            const response = await fetch(`${this.apiUrl}/tags/all`);\n\n            if (!response.ok) throw new Error(`HTTP ${response.status}`);\n\n            const result = await response.json();\n\n            this.tags = result;\n            this.renderTags();\n        } catch (err) {\n            Toast.show('[MediaGalleryLoader] ' + __('Erreur de chargement des tags :', 'admin') + ' ' + err.message, {\n                type: 'danger',\n                icon: '⚠️',\n                duration: 5000,\n                position: 'bottom-right',\n                closable: true\n            })\n            console.error('[MediaGalleryLoader] ' + __('Erreur de chargement des tags :', 'admin'), err);\n        }\n    }\n\n    async addTag(tag) {\n        try {\n            const response = await fetch(`${this.apiUrl}/tags/add`, {\n                method: 'POST',\n                headers: {\n                    \"Content-Type\": \"application/x-www-form-urlencoded\",\n                },\n                body: 'name=' + encodeURIComponent(tag),\n            });\n\n            if (!response.ok) throw new Error(`HTTP ${response.status}`);\n\n            const result = await response.json();\n\n            this.loadTags();\n        } catch (err) {\n            Toast.show('[MediaGalleryLoader] ' + __(\"Erreur d'ajout de tag :\", 'admin') + ' ' + err.message, {\n                type: 'danger',\n                icon: '⚠️',\n                duration: 5000,\n                position: 'bottom-right',\n                closable: true\n            });\n            console.error('[MediaGalleryLoader] ' + __(\"Erreur d'ajout de tag :\", 'admin'), err);\n        }\n    }\n\n    renderMedia(mediaItems = []) {\n        this.grid.innerHTML = '';\n        mediaItems.forEach(media => {\n            const card = this.createMediaCard(media);\n            this.grid.appendChild(card);\n        });\n    }\n\n    renderPagination(currentPage, lastPage) {\n        this.pagination.innerHTML = '';\n\n        for (let page = 1; page <= lastPage; page++) {\n            const span = document.createElement('span');\n            span.dataset.page = page;\n            span.textContent = page;\n            if (page === currentPage) span.classList.add('active');\n            this.pagination.appendChild(span);\n        }\n    }\n\n    renderTags() {\n        this.tags_content.innerHTML = '';\n        this.tags.forEach(tag => {\n            const span = document.createElement('span');\n            span.dataset.tag = tag.id;\n            span.textContent = tag.name;\n            this.tags_content.appendChild(span);\n        });\n    }\n\n    /*\n        * Met à jour les tags de la galerie de médias. ajouter class active sur les tags sélectionnés\n     */\n    updateTags() {\n        const tags = this.tags_content.querySelectorAll('span[data-tag]');\n        tags.forEach(tag => {\n\n            const id = tag.dataset.tag;\n\n            if (!id) return;\n\n            if (this.search)\n                tag.classList.toggle('hidden', !tag.textContent.toLowerCase().includes(this.search.toLowerCase()));\n\n            if (this.selectTags.includes(id))\n                tag.classList.add('active');\n            else\n                tag.classList.remove('active');\n        });\n    }\n\n    createMediaCard(media) {\n        const div = document.createElement('div');\n        div.className = 'media-card __media_card';\n        div.dataset.id = media.id;\n\n        const isImage = media.mime_type.startsWith('image/');\n\n        div.innerHTML = `\n            <div class=\"media-card--mime\">${media.mime_type}</div>\n            <div class=\"media-card--preview\">\n                ${isImage\n            ? `<img src=\"/${media.path}\" alt=\"${media.original_name}\">`\n            : `<div class=\"media-card--icon\">${this.getIconForMime(media.mime_type)}</div>`}\n            </div>\n            <div class=\"media-card--meta\">\n                <div class=\"name\">${media.original_name}</div>\n                <div class=\"size\">${(media.size / 1024).toFixed(1)} ko</div>\n            </div>\n        `;\n        div.dataset.media = JSON.stringify(media);\n        return div;\n    }\n\n    replaceCardWithMedia(tempCard, media) {\n        const newCard = this.createMediaCard(media);\n        tempCard.replaceWith(newCard);\n    }\n\n    getIconForMime(mime) {\n        if (mime === 'application/pdf') return '📄';\n        if (mime === 'text/plain') return '📃';\n        if (mime.startsWith('video/')) return '🎥';\n        return '📁';\n    }\n\n    uploadFile(file) {\n        const formData = new FormData();\n        formData.append('file', file);\n\n        const tempCard_el = BuildHelper.div('media-card uploading');\n        const preview_el = BuildHelper.div('media-card--preview');\n        const progressBar_el = BuildHelper.div('progress-bar');\n        preview_el.appendChild(this.getPreviewHTML(file));\n        tempCard_el.appendChild(preview_el);\n        tempCard_el.appendChild(progressBar_el);\n        this.grid.prepend(tempCard_el);\n\n        const progressBar = tempCard_el.querySelector('.progress-bar');\n\n        const xhr = new XMLHttpRequest();\n        xhr.open('POST', `${this.apiUrl}/upload`);\n\n        xhr.upload.onprogress = (e) => {\n            const percent = Math.floor((e.loaded / e.total) * 100);\n            progressBar.style.width = percent + '%';\n        };\n\n        xhr.onload = () => {\n            if (xhr.status === 200) {\n                try {\n                    const response = JSON.parse(xhr.responseText);\n                    this.replaceCardWithMedia(tempCard_el, response);\n                } catch (err) {\n\n                    tempCard_el.innerHTML = `<div class=\"error\">❌ ${__('Réponse invalide', 'admin')}</div>`;\n                }\n            } else {\n                tempCard_el.innerHTML = `<div class=\"error\">❌ ${__('Upload échoué', 'admin')}</div>`;\n            }\n        };\n\n        xhr.onerror = () => {\n            tempCard_el.innerHTML = `<div class=\"error\">❌ ${__('Erreur réseau', 'admin')}</div>`;\n        };\n\n        xhr.send(formData);\n    }\n\n    getPreviewHTML(file) {\n        if (file.type.startsWith('image/svg')) {\n            const svg = BuildHelper.img(URL.createObjectURL(file), 'preview');\n            return svg;\n        } else if (file.type.startsWith('image/'))\n            return BuildHelper.img(URL.createObjectURL(file), 'preview');\n\n        const div = BuildHelper.div('media-card--icon');\n        div.innerHTML = this.getIconForMime(file.type);\n\n        return div;\n    }\n}\n","import {OptionBlock} from './OptionBlock.js';\nimport BuildHelper from '../BuildHelper.js';\nimport MediaGallery from '../MediaGallery';\n\nexport class MediaBlock extends OptionBlock {\n    constructor(key, label, value = null, options = {}, onChange = null, group = 'default') {\n        super(key, label, value, options, onChange, group);\n        this.type = 'media';\n        this.mimeTypes = options.mimeTypes || [];\n    }\n\n    render(container) {\n        const wrapper = super.render()\n        wrapper.classList.add('media');\n\n        const preview = document.createElement('div');\n        preview.className = 'media-preview';\n        preview.textContent = this.value || 'Aucun média sélectionné';\n        preview.dataset.tooltip = 'Sélectionner un média';\n        preview.addEventListener('click', () => {\n            this.modal.classList.add('active');\n            // 👉 ici, déclenche ton sélecteur personnalisé et set la valeur\n        });\n\n        if (this.value) {\n            preview.appendChild(this.getPreview(this.value));\n            this.value = this.value.id;\n        }\n\n        const label = document.createElement('label');\n        label.textContent = this.label;\n\n        wrapper.appendChild(preview);\n        wrapper.appendChild(label);\n        container.appendChild(wrapper);\n\n        const {modal, content, close} = BuildHelper.modal(null, () => {\n        });\n        content.dataset.canUpload = 'true';\n        content.dataset.forcedMimeTypes = this.mimeTypes;\n\n        this.modal = modal;\n        document.body.appendChild(this.modal);\n\n        this.gallery = new MediaGallery(content);\n        this.gallery.onClickItem = (media) => {\n            this.value = media.id;\n            preview.appendChild(this.getPreview(media));\n            this.modal.classList.remove('active');\n            this.notifyChange()\n        };\n    }\n\n    getPreview(media) {\n        //return img if media is an image, else return icon (media.mime_type)\n        if (media.mime_type.startsWith('image/')) {\n            return BuildHelper.img('/' + media.path, media.name, 'media-current');\n        } else {\n            const icon = this.gallery.getIconForMime(media.mime_type);\n            let span = document.createElement('span');\n            span.className = 'media-current';\n            span.textContent = icon;\n\n            return span;\n        }\n\n\n    }\n}\n","import {OptionBlock} from './OptionBlock.js';\n\nexport class SelectBlock extends OptionBlock {\n    constructor(key, label, value = null, options = {}, onChange = null, group = 'default') {\n        super(key, label, value, options, onChange, group);\n        this.type = 'string';\n    }\n\n    render(container) {\n        const wrapper = super.render()\n        wrapper.classList.add('select')\n\n        const labelEl = document.createElement('label');\n        labelEl.textContent = this.label;\n        labelEl.setAttribute('for', this.key);\n\n        const select = document.createElement('select');\n        select.id = this.key;\n        select.name = this.key;\n\n        this.options?.options.forEach(opt => {\n            const option = document.createElement('option');\n            option.value = opt.value;\n            option.textContent = opt.label;\n            option.selected = opt.value === this.value;\n            select.appendChild(option);\n        });\n\n        select.addEventListener('change', () => {\n            this.value = select.value;\n            this.notifyChange();\n        });\n\n        wrapper.appendChild(labelEl);\n        wrapper.appendChild(select);\n\n        container.appendChild(wrapper);\n    }\n}\n","import { OptionBlock } from './OptionBlock.js';\n\nexport class BoolBlock extends OptionBlock {\n    constructor(key, label, value = false, options = {}, onChange = null, group = 'default') {\n        super(key, label, value, options, onChange, group);\n        this.type = 'bool';\n    }\n\n    render(container) {\n        const wrapper = super.render();\n        wrapper.classList.add('bool');\n\n        const label = document.createElement('label');\n        label.textContent = this.label;\n        wrapper.appendChild(label);\n\n        const switcher = document.createElement('div');\n        switcher.className = 'bool-switch';\n        switcher.dataset.state = this.value ? 'on' : 'off';\n        switcher.title = this.value ? 'Activé' : 'Désactivé';\n\n        switcher.addEventListener('click', () => {\n            this.value = !this.value;\n            switcher.dataset.state = this.value ? 'on' : 'off';\n            switcher.title = this.value ? 'Activé' : 'Désactivé';\n            this.notifyChange();\n        });\n\n        wrapper.appendChild(switcher);\n        container.appendChild(wrapper);\n    }\n}\n","import {IntBlock} from './IntBlock.js';\nimport {FloatBlock} from './FloatBlock.js';\nimport {StringBlock} from './StringBlock.js';\nimport {MediaBlock} from './MediaBlock.js';\nimport {SelectBlock} from './SelectBlock.js';\nimport {BoolBlock} from './BoolBlock.js';\n\nexport class BlockFactory {\n    static types = {\n        int: IntBlock,\n        float: FloatBlock,\n        string: StringBlock,\n        media: MediaBlock,\n        select: SelectBlock,\n        bool: BoolBlock,\n    };\n\n    static register(type, clazz) {\n        this.types[type] = clazz;\n    }\n\n    static create(type, key, label, value = null, options = [], onChange = null, group = 'default') {\n        const BlockClass = this.types[type];\n        if (!BlockClass) {\n            throw new Error(`Type de bloc inconnu : ${type}`);\n        }\n        return new BlockClass(key, label, value, options, onChange, group);\n    }\n}\n","export default class OptionManager {\n    static _cache = new Map(); // Map<string, Map<string, {type, value}>>\n\n    static async getOption(group, key) {\n        // Check cache d'abord\n        if (this._cache.has(group) && this._cache.get(group).has(key)) {\n            return this._cache.get(group).get(key);\n        }\n\n        // Sinon fetch\n        const res = await fetch(`/admin/options/get/${group}/${key}`);\n        if (!res.ok) throw new Error(`Erreur chargement de l'option \"${key}\"`);\n\n        const data = await res.json();\n\n        // Met à jour le cache\n        if (!this._cache.has(group)) this._cache.set(group, new Map());\n        this._cache.get(group).set(key, data);\n\n        return data;\n    }\n\n    static async getOptions(group) {\n        if (this._cache.has(group)) {\n            return Object.fromEntries(this._cache.get(group));\n        }\n\n        const res = await fetch(`/admin/options/get/${group}`);\n        if (!res.ok) throw new Error(`Erreur chargement des options du groupe \"${group}\"`);\n\n        const data = await res.json();\n\n        // Stocke en cache sous forme de Map\n        const groupMap = new Map(Object.entries(data));\n        this._cache.set(group, groupMap);\n\n        return data;\n    }\n\n    static async saveOption(option) {\n        const group = option.group ?? null;\n        const key = option.key ?? null;\n        const type = option.type ?? null;\n        const value = option.value ?? null;\n\n        if (!group || !key || typeof type !== 'string')\n            throw new Error('Paramètres invalides pour saveOption()');\n\n        const url = `/admin/options/set/${group}/${key}`;\n        const payload = {type, value};\n\n        const res = await fetch(url, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(payload)\n        });\n\n        if (!res.ok) {\n            throw new Error(`Erreur HTTP ${res.status} : enregistrement de \"${key}\" échoué`);\n        }\n\n        const result = await res.json();\n\n        // Mise à jour du cache\n        if (!this._cache.has(group)) this._cache.set(group, new Map());\n        this._cache.get(group).set(key, payload);\n\n        return result;\n    }\n\n    static async saveOptions(group, options) {\n        if (!Array.isArray(options))\n            throw new Error('Les options doivent être un tableau');\n\n        const filteredOptions = options.filter(opt =>\n            typeof opt === 'object' &&\n            typeof opt.type === 'string' &&\n            'value' in opt\n        );\n\n        const res = await fetch(`/admin/options/set/${group}`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(filteredOptions)\n        });\n\n        if (!res.ok)\n            throw new Error(`Erreur lors de l'enregistrement des options du groupe \"${group}\"`);\n\n        const result = await res.json();\n\n        // Mise à jour du cache\n        const groupMap = this._cache.get(group) ?? new Map();\n        Object.entries(result).forEach(([key, opt]) => {\n            groupMap.set(key, opt);\n        });\n        this._cache.set(group, groupMap);\n\n        return result;\n    }\n\n    static async deleteOption(group, key) {\n        const res = await fetch(`/admin/options/delete/${group}/${key}`, {\n            method: 'DELETE'\n        });\n\n        if (!res.ok) {\n            throw new Error(`Erreur lors de la suppression de l'option \"${key}\"`);\n        }\n\n        const result = await res.json();\n\n        // Retirer du cache\n        if (this._cache.has(group)) {\n            this._cache.get(group).delete(key);\n        }\n\n        return result;\n    }\n}\n","import { BlockFactory } from './BlockFactory';\nimport OptionManager from './OptionManager';\nimport { Toast } from '../Toast';\nimport { __ } from '../Translator';\n\nexport class OptionsPage {\n    constructor(group, containerSelector = '#options-container') {\n        this.group = group;\n        this.container = document.querySelector(containerSelector);\n        this.options = {};\n        this.blocks = [];\n    }\n\n    async init() {\n        try {\n            this.options = await OptionManager.getOptions(this.group);\n            this.render();\n        } catch (err) {\n            console.error(`[OptionsPage] Erreur chargement \"${this.group}\":`, err);\n            Toast.show(__('Erreur lors du chargement des options', 'admin'), {\n                type: 'danger',\n                icon: '❌'\n            });\n        }\n    }\n\n    render() {\n        throw new Error('La méthode render() doit être implémentée dans la sous-classe');\n    }\n\n    createBlock(type, key, label, defaultValue = null, options = {}, group = this.group) {\n        const value = key in this.options ? this.options[key] : defaultValue;\n\n        const block = BlockFactory.create(\n            type,\n            key,\n            label,\n            value,\n            options,\n            (option) => this.handleSaveOption(option),\n            group\n        );\n\n        this.blocks.push(block);\n        return block;\n    }\n\n    async handleSaveOption(option) {\n        try {\n            await OptionManager.saveOption(option);\n            Toast.show(__('Option enregistrée avec succès', 'admin'), {\n                type: 'success',\n                icon: '✅',\n                duration: 4000,\n                position: 'bottom-right',\n                closable: true\n            });\n        } catch (err) {\n            console.error('[OptionsPage] Erreur save option:', err);\n            Toast.show(__('Erreur lors de l\\'enregistrement', 'admin'), {\n                type: 'error',\n                icon: '❌',\n                duration: 4000,\n                position: 'bottom-right',\n                closable: true\n            });\n        }\n    }\n\n    renderBlocks(...blocks) {\n        blocks.forEach(block => block.render(this.container));\n    }\n}\n","import {OptionsPage} from '@framework/js/components/options/OptionsPage';\nimport {__} from '@framework/js/components/Translator';\nimport BuildHelper from '@framework/js/components/BuildHelper';\n\nexport class TestOptionsPage extends OptionsPage {\n    constructor() {\n        super('test');\n    }\n\n    render() {\n        const wrapper = BuildHelper.div('options-wrapper');\n\n        const intBlock = this.createBlock(\n            'int',\n            'test_int_value',\n            __('Valeur entière', 'admin'),\n            null,\n            {\n                description: __('Un nombre entier à saisir', 'admin'),\n            },\n            'test'\n        );\n\n        const floatBlock = this.createBlock(\n            'float',\n            'test_float_value',\n            __('Valeur décimale', 'admin'),\n            null,\n            {\n                description: __('Un nombre à virgule pour les tests', 'admin'),\n            }\n        );\n\n        const stringBlock = this.createBlock(\n            'string',\n            'test_string_value',\n            __('Texte simple', 'admin'),\n            null,\n            {\n                description: __('Une chaîne de texte modifiable', 'admin'),\n                placeholder: __('Entrez du texte...', 'admin'),\n            },\n            'test'\n        );\n\n        const boolBlock = this.createBlock(\n            'bool',\n            'test_bool_value',\n            __('Activer la fonctionnalité ?', 'admin'),\n            null,\n            {\n                description: __('Active ou désactive la fonctionnalité de test', 'admin'),\n            },\n            'test'\n        );\n\n        const selectBlock = this.createBlock(\n            'select',\n            'test_select_value',\n            __('Type de choix', 'admin'),\n            null,\n            {\n                description: __('Choisissez une des options', 'admin'),\n                options: [\n                    {value: 'alpha', label: 'Alpha'},\n                    {value: 'beta', label: 'Bêta'},\n                    {value: 'gamma', label: 'Gamma'},\n                ]\n            },\n            'test'\n        );\n\n        const mediaBlock = this.createBlock(\n            'media',\n            'test_media_value',\n            __('Fichier média', 'admin'),\n            null,\n            {\n                description: __('Sélectionnez un média pour le test', 'admin'),\n                mimeTypes: ['image/jpeg', 'image/png', 'image/webp'],\n                label: __('Choisir un média', 'admin')\n            },\n            'test'\n        );\n\n        // Ajout à l'interface\n        [\n            intBlock,\n            floatBlock,\n            stringBlock,\n            boolBlock,\n            selectBlock,\n            mediaBlock,\n        ].forEach(block => block.render(wrapper));\n\n        this.container.appendChild(wrapper);\n    }\n}\n","import {TestOptionsPage} from './admin/TestOptionsPage.js';\n\ndocument.addEventListener('DOMContentLoaded', async () => {\n    await new TestOptionsPage()?.init();\n    console.log('[Admin Options Test] Page initialized successfully');\n});\n"],"names":["OptionBlock","constructor","key","label","value","options","onChange","group","this","type","description","render","wrapper","document","createElement","className","descriptionIcon","renderDescriptionIcon","appendChild","icon","textContent","dataset","tooltip","notifyChange","Error","IntBlock","super","_timeout","_delay","delay","_placeholder","placeholder","container","classList","add","input","step","progress","addEventListener","e","parseInt","target","style","transition","width","clearTimeout","requestAnimationFrame","setTimeout","FloatBlock","parseFloat","StringBlock","BuildHelper","accordion","title","subclass","accordeon","accordeon_title","accordeon_content","glow_stick","input_text","button_submit","text","button","onClick","div","modal","onClose","close","content","remove","h2","h3","img","src","alt","list","items","ul","forEach","item","li","innerHTML","search","onSearch","onClickItem","searchMinLength","openBottom","searchContainer","results","length","closest","input_search","onEmpty","Translator","static","load","domain","_loaded","response","fetch","ok","data","json","_domains","error","console","message","translate","replacements","trim","translation","_applyReplacements","t","str","replace","match","token","__","ConfirmDialog","show","onConfirm","onCancel","defaults","confirmText","cancelText","confirmClass","cancelClass","title_el","overlay_el","box_el","message_el","actions_el","confirm_el","cancel_el","append","body","Toast","Map","position","duration","closable","_getContainer","toast","querySelector","_removeToast","containers","has","set","get","MediaModalViewer","gallery","waitingTags","deletionMode","new_tag","loadPage","modal_content","open","media","tags","JSON","parse","stringify","buildActions","buildPreview","info","infoContainer","original_name","infoSub","mime_type","size","toFixed","extension","Date","created_at","toLocaleDateString","buildTagEditor","exif","Object","keys","exifList","entries","map","buildTagUpdateButton","tooltipType","onclick","async","encoded","tag","id","encodeURIComponent","join","tagDeleteBtn","res","apiUrl","method","headers","status","new","updateTagList","updateTagButtonVisibility","err","buildTagDeleteToggle","newTags","filter","push","toggle","buildAddCategoryButton","find","name","toLowerCase","dispatchEvent","Event","tagAddBtn","renderTags","tagsContainer","tagList","tagActions","tagUpdateBtn","waitingTagIds","mediaTagIds","some","includes","tagEl","result","results_el","filtered","tagId","actions","dl","blob","path","url","URL","createObjectURL","link","href","download","click","removeChild","window","del","preview","startsWith","svg","getIconForMime","MediaGallery","element","canUpload","canModal","canEditTags","perPage","selectTags","mimeTypes","forced_mimeTypes","isNaN","forcedMimeTypes","split","mime","buildElements","initEvents","loadTags","dropZone","tags_form","tag_input","tag_submit","preventDefault","updateTags","addTag","tags_actions","tags_content","grid","pagination","index","page","splice","indexOf","relatedTarget","contains","files","dataTransfer","file","uploadFile","card","params","URLSearchParams","renderMedia","renderPagination","current_page","last_page","mediaItems","createMediaCard","currentPage","lastPage","span","querySelectorAll","isImage","replaceCardWithMedia","tempCard","newCard","replaceWith","formData","FormData","tempCard_el","preview_el","progressBar_el","getPreviewHTML","prepend","progressBar","xhr","XMLHttpRequest","upload","onprogress","percent","Math","floor","loaded","total","onload","responseText","onerror","send","MediaBlock","getPreview","SelectBlock","labelEl","setAttribute","select","opt","option","selected","BoolBlock","switcher","state","BlockFactory","int","float","string","bool","register","clazz","types","create","BlockClass","OptionManager","getOption","_cache","getOptions","fromEntries","groupMap","saveOption","payload","saveOptions","Array","isArray","filteredOptions","deleteOption","delete","OptionsPage","containerSelector","blocks","init","createBlock","defaultValue","block","handleSaveOption","renderBlocks","TestOptionsPage","log"],"sourceRoot":""}