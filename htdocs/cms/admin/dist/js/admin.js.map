{"version":3,"file":"admin/dist/js/admin.js","mappings":"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","sources":["webpack:///../vendor/bugquest/web-framework/Assets/js/components/language-switcher.js","webpack:///../vendor/bugquest/web-framework/Assets/js/components/dropdown.js","webpack:///webpack/bootstrap","webpack:///../vendor/bugquest/web-framework/Assets/js/components/Accordion.js","webpack:///../vendor/bugquest/web-framework/Assets/js/components/BuildHelper.js","webpack:///../vendor/bugquest/web-framework/Assets/js/components/Translator.js","webpack:///../vendor/bugquest/web-framework/Assets/js/components/ConfirmDialog.js","webpack:///../vendor/bugquest/web-framework/Assets/js/components/Toast.js","webpack:///../vendor/bugquest/web-framework/Assets/js/components/MediaModalViewer.js","webpack:///../vendor/bugquest/web-framework/Assets/js/components/MediaGallery.js","webpack:///../vendor/bugquest/web-framework/Assets/js/components/Tooltip.js","webpack:///../vendor/bugquest/web-framework/Assets/js/components/DebugPanel.js","webpack:///../vendor/bugquest/web-framework/Assets/js/admin.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n    const langSelect = document.getElementById('langSelect');\n    if (langSelect) {\n        langSelect.addEventListener('change', () => {\n            const locale = langSelect.value;\n            document.cookie = `bq_locale=${locale};path=/;max-age=31536000;SameSite=Lax`;\n            location.reload();\n        });\n    }\n});\n","document.addEventListener('click', function (e) {\n    const target = e.target.closest('.__dropdown_toggle');\n    const dropdown = target?.closest('.__dropdown');\n    document.querySelectorAll('.__dropdown').forEach(d => {\n        if (d !== dropdown) d.classList.remove('active');\n    });\n    if (dropdown) dropdown.classList.toggle('active');\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","export class Accordion {\n    static setup(selector = '.accordeon') {\n        document.addEventListener('click', (e) => {\n            const title = e.target.closest(`${selector} .accordeon-title`);\n            if (!title) return;\n\n            const accordeon = title.closest(selector);\n            const content = accordeon.querySelector('.accordeon-content');\n            if (!content) return;\n\n            Accordion.toggle(accordeon, content);\n        });\n    }\n\n    static toggle(accordeon, content) {\n        const isOpen = accordeon.classList.contains('active');\n\n        if (isOpen) {\n            // Active animation en mesurant la hauteur actuelle\n            content.style.maxHeight = content.scrollHeight + 'px';\n\n            // Forcer un reflow pour garantir la transition\n            void content.offsetHeight;\n\n            content.style.maxHeight = '0';\n            accordeon.classList.remove('active');\n        } else {\n            content.style.maxHeight = content.scrollHeight + 'px';\n            accordeon.classList.add('active');\n\n            // Nettoyage après animation\n            const onTransitionEnd = () => {\n                if (accordeon.classList.contains('active')) {\n                    content.style.maxHeight = 'none';\n                }\n                content.removeEventListener('transitionend', onTransitionEnd);\n            };\n\n            content.addEventListener('transitionend', onTransitionEnd);\n        }\n    }\n}","export default class BuildHelper {\n\n    static accordion(title, subclass) {\n        let accordeon = document.createElement('div');\n        accordeon.className = '__accordeon accordeon';\n        if (subclass)\n            accordeon.classList.add(subclass);\n\n        let accordeon_title = document.createElement('div');\n        accordeon_title.className = '__accordeon_title accordeon-title';\n        accordeon_title.textContent = title;\n        accordeon.appendChild(accordeon_title);\n\n        let accordeon_content = document.createElement('div');\n        accordeon_content.className = 'accordeon-content';\n        accordeon.appendChild(accordeon_content);\n\n        return {accordeon, accordeon_content};\n    }\n\n    static glow_stick() {\n        let glow_stick = document.createElement('div');\n        glow_stick.className = 'glow-bar';\n        return glow_stick;\n    }\n\n    static input_text(placeholder = '', value = '', className = '') {\n        let input = document.createElement('input');\n        input.type = 'text';\n        input.placeholder = placeholder;\n        input.value = value;\n        input.className = className;\n        return input;\n    }\n\n    static button_submit(text = 'Envoyer', className = 'button button-primary') {\n        let button = document.createElement('button');\n        button.type = 'submit';\n        button.className = className;\n        button.textContent = text;\n        return button;\n    }\n\n    static button(text = 'Button', className = 'button', onClick = null) {\n        let button = document.createElement('div');\n        button.className = className;\n        button.textContent = text;\n        if (onClick)\n            button.addEventListener('click', onClick);\n        return button;\n    }\n\n    static div(className = '') {\n        let div = document.createElement('div');\n        div.className = className;\n        return div;\n    }\n\n    static modal(title = '', onClose = null) {\n        let modal = this.div('modal');\n        let wrapper = this.div('modal-wrapper');\n        let close = this.div('modal-close');\n        let content = this.div('modal-content');\n\n        if (title) {\n            let titleElement = this.div('modal-title');\n            titleElement.textContent = title;\n            modal.appendChild('titleElement');\n        }\n\n        wrapper.appendChild(close)\n        wrapper.appendChild(content)\n        modal.appendChild(wrapper)\n\n        close.addEventListener('click', () => {\n            modal.classList.remove('active');\n            if (onClose) onClose();\n        });\n\n        modal.addEventListener('click', (e) => {\n            // Close the modal if the user clicks outside of the content area, check children\n            if (e.target === modal) {\n                modal.classList.remove('active');\n                if (onClose) onClose();\n            }\n        });\n\n        return {modal, content, close};\n    }\n\n    static h2(content, className = '') {\n        let h2 = document.createElement('h2');\n        h2.className = className;\n        h2.textContent = content;\n        return h2;\n    }\n\n    static h3(content, className = '') {\n        let h3 = document.createElement('h3');\n        h3.className = className;\n        h3.textContent = content;\n        return h3;\n    }\n\n    static img(src, alt = '', className = '') {\n        let img = document.createElement('img');\n        img.src = src;\n        img.alt = alt;\n        if (className) img.className = className;\n        return img;\n    }\n\n    static list(items = [], className = '') {\n        let ul = document.createElement('ul');\n        ul.className = className;\n\n        items.forEach(item => {\n            let li = document.createElement('li');\n            li.innerHTML = item;\n            ul.appendChild(li);\n        });\n\n        return ul;\n    }\n\n    static search(placeholder = 'Rechercher...', onSearch = null, onClickItem = null, searchMinLength = 2, openBottom = false) {\n        let searchContainer = this.div('search-container');\n        let input = this.input_text(placeholder);\n        input.type = 'search';\n        let results = this.div('search-results ' + (openBottom ? ' open-bottom' : 'open-top'));\n        searchContainer.appendChild(input);\n        searchContainer.appendChild(results);\n        if (onSearch)\n            input.addEventListener('input', () => {\n                let value = input.value;\n                if (value.length >= searchMinLength)\n                    onSearch(value, results);\n                else\n                    results.innerHTML = '';\n\n            });\n\n        if (onClickItem)\n            results.addEventListener('click', (e) => {\n                let item = e.target.closest('.result-item');\n                if (item)\n                    onClickItem(item);\n            });\n\n        //add custom event to close the search results\n        searchContainer.addEventListener('close', () => {\n            results.innerHTML = '';\n            input.value = '';\n        });\n\n        return {searchContainer, results};\n    }\n\n    static input_search(placeholder = '', className = '', onSearch = null, onEmpty = null, searchMinLength = 2) {\n        let input = this.input_text(placeholder, '', className);\n        input.type = 'search';\n        input.addEventListener('input', () => {\n            let value = input.value;\n            if (value.length >= searchMinLength)\n                onSearch(value);\n            else\n                onEmpty();\n        });\n\n        return input;\n    }\n}","export class Translator {\n    static _domains = {};\n    static _loaded = {};\n\n    static async load(domain) {\n        if (this._loaded[domain]) return;\n\n        try {\n            const response = await fetch(`/admin/locale/domain/get/${domain}`);\n            if (!response.ok) throw new Error(`Error for domain: ${domain}`);\n            const data = await response.json();\n            this._domains[domain] = data;\n            this._loaded[domain] = true;\n            return data;\n        } catch (error) {\n            console.error(`[Translator] ${error.message}`);\n        }\n\n        return null;\n    }\n\n    static async translate(key, domain = 'bugquest', replacements = {}) {\n        domain = domain.trim();\n        key = key.trim();\n        if (!this._loaded[domain]) await this.load(domain);\n\n        let translation = this._domains[domain]?.[key] ?? key;\n        return this._applyReplacements(translation, replacements);\n    }\n\n    static t(key, domain = 'bugquest', replacements = {}) {\n        let translation = this._domains[domain]?.[key] ?? key;\n        return this._applyReplacements(translation, replacements);\n    }\n\n    static _applyReplacements(str, replacements) {\n        return str.replace(/{(.*?)}/g, (match, token) => {\n            return replacements[token] ?? match;\n        });\n    }\n}\n\nexport function __(key, domain = 'bugquest', replacements = {}) {\n    return Translator.t(key, domain, replacements);\n}\n","import BuildHelper from './BuildHelper.js';\nimport {__} from './Translator.js';\n\nexport default class ConfirmDialog {\n    static show(\n        onConfirm = () => {\n        },\n        onCancel = () => {\n        },\n        options = {}\n    ) {\n        const defaults = {\n            title: __('Confirmation', 'admin'),\n            message: __('Êtes-vous sûr de vouloir continuer ?', 'admin'),\n            confirmText: __('Valider', 'admin'),\n            cancelText: __('Annuler', 'admin'),\n            confirmClass: 'button success',\n            cancelClass: 'button danger'\n        };\n\n        const {title, message, confirmText, cancelText, confirmClass, cancelClass} = {...defaults, ...options};\n\n        const title_el = BuildHelper.div('confirm-title');\n        title_el.textContent = title;\n\n        const overlay_el = BuildHelper.div('confirm-overlay');\n        const box_el = BuildHelper.div('confirm-box');\n\n        const message_el = BuildHelper.div('confirm-message');\n        message_el.textContent = message;\n\n        const actions_el = BuildHelper.div('confirm-actions');\n\n        const confirm_el = BuildHelper.button(confirmText, confirmClass, () => {\n            onConfirm();\n            overlay_el.remove();\n        })\n\n        const cancel_el = BuildHelper.button(cancelText, cancelClass, () => {\n            onCancel();\n            overlay_el.remove();\n        })\n\n        actions_el.append(confirm_el, cancel_el);\n        box_el.append(title_el, message_el, actions_el);\n        overlay_el.appendChild(box_el);\n        document.body.appendChild(overlay_el);\n\n        setTimeout(() => overlay_el.classList.add('active'), 10);\n    }\n}\n","export class Toast {\n    static containers = new Map();\n\n    static show(message, {\n        type = 'info',\n        position = 'top-right',\n        duration = 4000,\n        icon = null,\n        closable = true\n    } = {}) {\n        const container = this._getContainer(position);\n\n        const toast = document.createElement('div');\n        toast.className = `bq-toast ${type}`;\n        toast.innerHTML = `\n            ${icon ? `<div class=\"bq-toast-icon\">${icon}</div>` : ''}\n            <div class=\"bq-toast-message\">${message}</div>\n            ${closable ? `<button class=\"bq-toast-close\" title=\"Fermer\">✖</button>` : ''}\n        `;\n\n        if (closable) {\n            toast.querySelector('.bq-toast-close').addEventListener('click', () => this._removeToast(toast));\n        }\n\n        container.appendChild(toast);\n\n        // Animation d’apparition\n        requestAnimationFrame(() => {\n            toast.classList.add('show');\n        });\n\n        if (duration > 0) {\n            setTimeout(() => this._removeToast(toast), duration);\n        }\n    }\n\n    static _getContainer(position) {\n        if (!this.containers.has(position)) {\n            const container = document.createElement('div');\n            container.className = `bq-toast-container ${position}`;\n            document.body.appendChild(container);\n            this.containers.set(position, container);\n        }\n        return this.containers.get(position);\n    }\n\n    static _removeToast(toast) {\n        toast.classList.remove('show');\n        setTimeout(() => toast.remove(), 300);\n    }\n}","import BuildHelper from \"./BuildHelper\";\nimport ConfirmDialog from \"./ConfirmDialog\";\nimport {Toast} from \"./Toast\";\nimport {__} from './Translator.js';\n\nexport default class MediaModalViewer {\n    constructor(gallery) {\n        this.gallery = gallery;\n        this.waitingTags = [];\n        this.deletionMode = false;\n        this.new_tag = '';\n\n        const {modal, content, close} = BuildHelper.modal(null, () => {\n            this.gallery.loadPage();\n            this.waitingTags = [];\n            this.deletionMode = false;\n            content.innerHTML = '';\n        });\n\n        this.modal = modal;\n        this.modal_content = content;\n        document.body.appendChild(this.modal);\n    }\n\n    async open(media) {\n        if (!media) return;\n\n        this.waitingTags = media.tags ? JSON.parse(JSON.stringify(media.tags)) : [];\n        this.deletionMode = false;\n        this.modal_content.innerHTML = '';\n\n        const container = BuildHelper.div('media-modal');\n\n        container.appendChild(this.buildActions(media));\n        container.appendChild(this.buildPreview(media));\n\n        const info = BuildHelper.div('media-modal--info');\n        const infoContainer = BuildHelper.div('media-modal--info-container');\n\n        const title = BuildHelper.h2(media.original_name);\n        const infoSub = BuildHelper.div();\n        const list = BuildHelper.list([`<strong>Type :</strong> ${media.mime_type}`, `<strong>Taille :</strong> ${(media.size / 1024).toFixed(1)} ko`, `<strong>Extension :</strong> ${media.extension}`, `<strong>Ajouté le :</strong> ${new Date(media.created_at).toLocaleDateString('fr-FR')}`,]);\n\n        infoSub.appendChild(title);\n        infoSub.appendChild(list);\n        infoContainer.appendChild(infoSub);\n\n        infoContainer.appendChild(this.buildTagEditor(media));\n        info.appendChild(infoContainer);\n\n        if (media.exif && typeof media.exif === 'object' && Object.keys(media.exif).length > 0) {\n            const {accordeon, accordeon_content} = BuildHelper.accordion('EXIF', 'small');\n            const exifList = BuildHelper.list(Object.entries(media.exif).map(([key, value]) => `<strong>${key}:</strong> ${typeof value === 'object' ? JSON.stringify(value) : value}`));\n            exifList.classList.add('media-modal--exif');\n            accordeon_content.appendChild(exifList);\n            info.appendChild(accordeon);\n        }\n\n        container.appendChild(info);\n        this.modal_content.appendChild(container);\n        this.modal.classList.add('active');\n    }\n\n    buildTagUpdateButton(media) {\n        const button = BuildHelper.div('icon info hidden');\n        button.innerHTML = '💾';\n        button.dataset.tooltip = __('Mettre à jour les tags', 'admin');\n        button.dataset.tooltipType = 'info';\n\n        button.onclick = async () => {\n\n            let tagIds = this.waitingTags.map(tag => tag.id);\n\n            const encoded = tagIds.map(id => `tags[]=${encodeURIComponent(id)}`).join('&');\n\n            this.deletionMode = false;\n            this.tagDeleteBtn.classList.remove('active');\n\n            try {\n                const res = await fetch(`${this.gallery.apiUrl}/tags/set/${media.id}`, {\n                    method: 'POST', headers: {\n                        'Content-Type': 'application/x-www-form-urlencoded',\n                    }, body: encoded\n                });\n\n                if (!res.ok) throw new Error(`HTTP ${res.status}`);\n\n                this.waitingTags.forEach(tag => {\n                    if (\"new\" in tag && tag.new) delete tag.new;\n                });\n                media.tags = JSON.parse(JSON.stringify(this.waitingTags));\n                this.updateTagList()\n                this.updateTagButtonVisibility()\n                Toast.show(__('Tags mis à jour', 'admin'), {\n                    type: 'success', icon: '✅', duration: 2000, position: 'bottom-right', closable: true\n                })\n\n            } catch (err) {\n                Toast.show('[MediaModalViewer] ' + __('Erreur mise à jour des tags :', 'admin') + ' ' + err.message, {\n                    type: 'danger', icon: '⚠️', duration: 5000, position: 'bottom-right', closable: true\n                })\n                console.error('[MediaModalViewer] ' + __('Erreur mise à jour des tags :', 'admin'), err);\n            }\n        };\n\n        return button;\n    }\n\n    buildTagDeleteToggle(media) {\n        const button = BuildHelper.div('icon danger');\n        button.innerHTML = '❌';\n        button.dataset.tooltip = __('Mode suppression', 'admin');\n        button.dataset.tooltipType = 'danger';\n\n        button.onclick = () => {\n            this.deletionMode = !this.deletionMode;\n\n            //if close delete mode, reset tags to original and keep new tags at end\n            if (!this.deletionMode) {\n                const newTags = this.waitingTags.filter(tag => (\"new\" in tag && tag.new));\n                this.waitingTags = media.tags ? JSON.parse(JSON.stringify(media.tags)) : [];\n                this.waitingTags.push(...newTags);\n                this.updateTagList();\n                this.updateTagButtonVisibility()\n            }\n\n            button.classList.toggle('active', this.deletionMode);\n        };\n\n        return button;\n    }\n\n    buildAddCategoryButton(media) {\n        const button = BuildHelper.div('icon hidden');\n        button.innerHTML = '➕';\n        button.dataset.tooltip = __('Ajouter une nouvelle catégorie', 'admin');\n        button.dataset.tooltipType = 'info';\n\n        button.onclick = async () => {\n\n            if (!this.new_tag || this.new_tag.length < 3) return;\n\n            //check if tag already exists\n            const tagExists = this.gallery.tags.find(tag => tag.name.toLowerCase() === this.new_tag.toLowerCase());\n            if (tagExists) return;\n\n            try {\n                const response = await fetch(`${this.gallery.apiUrl}/tags/add`, {\n                    method: 'POST',\n                    headers: {\n                        \"Content-Type\": \"application/x-www-form-urlencoded\",\n                    },\n                    body: 'name=' + encodeURIComponent(this.new_tag),\n                });\n\n                this.search.dispatchEvent(new Event('close'));\n                this.new_tag = '';\n                this.tagAddBtn.classList.add('hidden')\n\n                if (!response.ok) throw new Error(`HTTP ${response.status}`);\n\n                const tag = await response.json();\n                this.gallery.tags.push(tag);\n                this.gallery.renderTags();\n                tag.new = true;\n                this.waitingTags.push(tag);\n                this.updateTagList();\n                this.updateTagButtonVisibility();\n            } catch (err) {\n                Toast.show('[MediaModalViewer] ' + __(\"Erreur d'ajout de tag :\", 'admin') + ' ' + err.message, {\n                    type: 'danger',\n                    icon: '⚠️',\n                    duration: 5000,\n                    position: 'bottom-right',\n                    closable: true\n                })\n                console.error('[MediaModalViewer] ' + __(\"Erreur d'ajout de tag :\", 'admin'), err);\n            }\n        };\n\n        return button;\n    }\n\n    buildTagEditor(media) {\n        const tagsContainer = BuildHelper.div('media-modal--tags');\n        const tagList = BuildHelper.div('media-modal--tags-list');\n        const tagActions = BuildHelper.div('media-modal--tags-actions');\n\n        this.tagUpdateBtn = this.buildTagUpdateButton(media);\n        this.tagAddBtn = this.buildAddCategoryButton(media);\n        this.tagDeleteBtn = this.buildTagDeleteToggle(media);\n        tagActions.append(this.tagUpdateBtn, this.tagDeleteBtn, this.tagAddBtn);\n\n        this.updateTagButtonVisibility = () => {\n            //check if waintingTags is different from media.tags, ignore order, check only ids\n            const waitingTagIds = this.waitingTags.map(tag => tag.id);\n            const mediaTagIds = media.tags.map(tag => tag.id);\n            const isDifferent = waitingTagIds.length !== mediaTagIds.length || waitingTagIds.some(id => !mediaTagIds.includes(id));\n\n            if (isDifferent)\n                this.tagUpdateBtn.classList.remove('hidden');\n            else\n                this.tagUpdateBtn.classList.add('hidden');\n        };\n\n        this.updateTagList = () => {\n            tagList.innerHTML = '';\n            this.waitingTags.forEach(tag => {\n                const tagEl = BuildHelper.div('tag');\n                tagEl.textContent = tag.name;\n                tagEl.dataset.tag = tag.id;\n\n                if (tag.new) {\n                    tagEl.classList.add('new');\n                    tagEl.dataset.tooltip = __('Cliquez pour supprimer', 'admin');\n                    tagEl.dataset.tooltipType = 'info';\n                }\n\n                tagEl.onclick = () => {\n                    if (!this.deletionMode) return;\n\n                    this.waitingTags = this.waitingTags.filter(t => t.id !== tag.id);\n                    tagEl.remove();\n                    this.updateTagButtonVisibility();\n                };\n\n                tagList.appendChild(tagEl);\n            });\n        };\n\n        this.updateTagList();\n\n        const {searchContainer, result} = BuildHelper.search(\n            __('Ajouter un tag', 'admin') + '...',\n            (value, results_el) => {\n                this.new_tag = value;\n                results_el.innerHTML = '';\n                const filtered =\n                    this.gallery.tags.filter(tag => tag.name.toLowerCase().includes(value.toLowerCase())\n                        && !media.tags.some(t => t.id === tag.id)\n                        && !this.waitingTags.some(t => t.id === tag.id));\n\n                if (filtered.length) {\n                    this.tagAddBtn.classList.add('hidden');\n                    results_el.classList.add('active');\n                } else {\n                    this.tagAddBtn.classList.remove('hidden');\n                    results_el.classList.remove('active');\n                }\n\n                filtered.forEach(tag => {\n                    const tagEl = BuildHelper.div('result-item');\n                    tagEl.textContent = tag.name;\n                    tagEl.dataset.tag = tag.id;\n                    results_el.appendChild(tagEl);\n                });\n            },\n            (item) => {\n                const tagId = parseInt(item.dataset.tag);\n                const tag = this.gallery.tags.find(t => t.id === tagId);\n                if (!tag) return;\n\n                tag.new = true;\n                this.waitingTags.push(tag);\n\n                searchContainer.dispatchEvent(new Event('close'));\n                this.updateTagList();\n                this.updateTagButtonVisibility();\n            }, 2);\n        this.search = searchContainer;\n\n        tagsContainer.append(tagActions, tagList, searchContainer);\n        return tagsContainer;\n    }\n\n    buildActions(media) {\n        const actions = BuildHelper.div('flex-actions');\n\n        const dl = BuildHelper.div('icon');\n        dl.innerHTML = '📥';\n        dl.dataset.tooltip = __('Télécharger', 'admin');\n        dl.dataset.tooltipType = 'info';\n        dl.onclick = async () => {\n            const blob = await (await fetch('/' + media.path)).blob();\n            const url = URL.createObjectURL(blob);\n            const link = document.createElement('a');\n            link.href = url;\n            link.download = media.original_name;\n            document.body.appendChild(link);\n            link.click();\n            document.body.removeChild(link);\n        };\n\n        const open = BuildHelper.div('icon');\n        open.innerHTML = '🔗';\n        open.dataset.tooltip = __('Ouvrir', 'admin');\n        open.dataset.tooltipType = 'info';\n        open.onclick = () => window.open('/' + media.path, '_blank');\n\n        const del = BuildHelper.div('icon danger');\n        del.innerHTML = '🗑️';\n        del.dataset.tooltip = __('Supprimer', 'admin');\n        del.dataset.tooltipType = 'danger';\n        del.onclick = async () => {\n\n            ConfirmDialog.show(async () => {\n                try {\n                    const res = await fetch(`${this.gallery.apiUrl}/delete/${media.id}`, {method: 'DELETE'});\n                    if (!res.ok) throw new Error(`HTTP ${res.status}`);\n                    this.gallery.loadPage();\n                    Toast.show(__('Média supprimé', 'admin'), {\n                        type: 'success', icon: '✅', duration: 2000, position: 'bottom-right', closable: true\n                    });\n                    this.close();\n                } catch (e) {\n                    Toast.show('[MediaModalViewer] ' + __('Erreur suppression média :', 'admin') + ' ' + e.message, {\n                        type: 'danger', icon: '⚠️', duration: 5000, position: 'bottom-right', closable: true\n                    });\n                    console.error('[MediaModalViewer] ' + __('Erreur suppression média :', 'admin'), e);\n                }\n            }, () => null, {\n                title: __('Supprimer ce média ?', 'admin'),\n                message: __('Cette action est irréversible. Êtes-vous sûr de vouloir continuer ?', 'admin'),\n                confirmText: __('Supprimer', 'admin'),\n                cancelText: __('Annuler', 'admin'),\n                confirmClass: 'button danger',\n                cancelClass: 'button info',\n            });\n        };\n\n        actions.append(dl, open, del);\n        return actions;\n    }\n\n    buildPreview(media) {\n        const preview = BuildHelper.div('media-modal--preview');\n        if (media.mime_type.startsWith('image/')) {\n            preview.appendChild(BuildHelper.img('/' + media.path, media.original_name));\n        }//svg\n        else if (media.mime_type.startsWith('image/svg')) {\n            const svg = BuildHelper.img('/' + media.path, media.original_name);\n            preview.appendChild(svg);\n        } else {\n            const icon = BuildHelper.div('media-card--icon');\n            icon.innerHTML = this.gallery.getIconForMime(media.mime_type);\n            preview.appendChild(icon);\n        }\n        return preview;\n    }\n\n    close() {\n        this.modal.classList.remove('active');\n        this.modal_content.innerHTML = '';\n    }\n}\n","import BuildHelper from './BuildHelper.js';\nimport MediaModalViewer from './MediaModalViewer.js';\nimport {Toast} from \"./Toast\";\nimport {__} from './Translator.js';\nimport ConfirmDialog from \"./ConfirmDialog\";\n\nexport default class MediaGallery {\n    constructor(element) {\n        this.element = element;\n\n        this.canUpload = false;\n        this.canModal = false;\n        this.onClickItem = null;\n        this.canEditTags = false;\n        this.deletionMode = false;\n        this.perPage = 12;\n        this.selectTags = [];\n        this.tags = [];\n        this.mimeTypes = [];\n        this.forced_mimeTypes = [];\n        this.search = '';\n        //check if element has data-per-page attribute\n        const perPage = this.element.dataset.perPage;\n        if (perPage && !isNaN(perPage))\n            this.perPage = parseInt(perPage, 10);\n\n        const canUpload = this.element.dataset.canUpload;\n        if (canUpload && canUpload === 'true')\n            this.canUpload = true;\n\n        const canModal = this.element.dataset.canModal;\n        if (canModal && canModal === 'true')\n            this.canModal = true;\n\n        const canEditTags = this.element.dataset.canEditTags;\n        if (canEditTags && canEditTags === 'true')\n            this.canEditTags = true;\n\n        const forcedMimeTypes = this.element.dataset.forcedMimeTypes;\n        if (forcedMimeTypes && forcedMimeTypes.length > 0) {\n            this.forced_mimeTypes = forcedMimeTypes.split(',').map(mime => mime.trim());\n        }\n\n        this.apiUrl = '/admin/medias';\n\n        this.buildElements();\n        this.initEvents();\n        this.loadTags();\n        this.loadPage();\n    }\n\n    buildElements() {\n\n        //====== DROPZONE ======\n        if (this.canUpload) {\n            this.dropZone = BuildHelper.div('media-dropzone');\n            this.element.appendChild(this.dropZone);\n        }\n\n        //====== TAGS ======\n        const tags = BuildHelper.div('media-gallery-tags');\n        this.element.appendChild(tags);\n\n        if (this.canEditTags) {\n            //====== TAGS FORM / ACCORDION ======\n            const {\n                accordeon,\n                accordeon_content\n            } = BuildHelper.accordion(__('Ajouter des tags', 'admin'), 'small');\n            tags.appendChild(accordeon);\n            tags.appendChild(BuildHelper.glow_stick());\n\n            const tags_form = BuildHelper.div('media-gallery-tags-form');\n            accordeon_content.appendChild(tags_form);\n\n            this.tag_input = BuildHelper.input_text(__('Ajouter un tag', 'admin'), '', 'small full');\n\n            tags_form.appendChild(this.tag_input)\n            this.tag_submit = BuildHelper.button_submit(__('Ajouter', 'admin'), 'button button-primary');\n            this.tag_submit.addEventListener('click', (e) => {\n                e.preventDefault();\n                this.deletionMode = false;\n                tagDeleteBtn.classList.remove('active');\n                this.search = '';\n                this.updateTags();\n                const tag = this.tag_input.value.trim();\n                if (tag) {\n                    this.addTag(tag);\n                    this.tag_input.value = '';\n                }\n            })\n            tags_form.appendChild(this.tag_submit);\n        }\n\n        //====== TAGS ACTIONS/SEARCH ======\n        const tags_actions = BuildHelper.div('media-gallery-tags-actions');\n        tags.appendChild(tags_actions);\n\n\n        const search = BuildHelper.input_search(\n            __('Rechercher', 'admin') + '...',\n            'small',\n            (value) => {\n                this.search = value\n                this.updateTags()\n            },\n            () => {\n                this.search = '';\n                this.updateTags()\n            });\n\n\n        tags_actions.appendChild(search);\n\n        if (this.canEditTags) {\n            const tagDeleteBtn = this.buildTagDeleteToggle();\n            tags_actions.appendChild(tagDeleteBtn);\n        }\n\n        //====== TAGS CONTENT ======\n        this.tags_content = BuildHelper.div('media-gallery-tags-content');\n        tags.appendChild(this.tags_content)\n\n        //====== MEDIA GALLERY ======\n        const container = BuildHelper.div('fullw');\n        this.element.appendChild(container);\n\n        this.grid = BuildHelper.div('media-gallery-content');\n        container.appendChild(this.grid);\n\n        this.pagination = BuildHelper.div('media-gallery-pagination');\n        container.appendChild(this.pagination)\n\n        if (this.canModal)\n            this.modal = new MediaModalViewer(this)\n    }\n\n    buildTagDeleteToggle(media) {\n        const button = BuildHelper.div('icon danger');\n        button.innerHTML = '❌';\n        button.dataset.tooltip = __('Mode suppression', 'admin');\n        button.dataset.tooltipType = 'danger';\n\n        button.onclick = () => {\n            this.deletionMode = !this.deletionMode;\n\n            if (this.deletionMode) {\n                this.selectTags = [];\n                this.updateTags();\n                this.loadPage()\n            }\n\n            button.classList.toggle('active', this.deletionMode);\n        };\n\n        return button;\n    }\n\n    initEvents() {\n        this.pagination.addEventListener('click', (e) => {\n            const index = e.target.closest('span[data-page]');\n            if (index) {\n                e.preventDefault();\n                const page = parseInt(index.dataset.page, 10);\n                if (!isNaN(page))\n                    this.loadPage(page);\n            }\n        });\n\n        this.tags_content.addEventListener('click', (e) => {\n            e.preventDefault();\n            const tag = e.target.closest('span[data-tag]');\n            if (!tag) return;\n\n            const id = tag.dataset.tag;\n\n            if (!id) return;\n\n            if (this.deletionMode) {\n                ConfirmDialog.show(async () => {\n                        const response = await fetch(`${this.apiUrl}/tags/delete/${id}`, {\n                            method: 'DELETE',\n                            headers: {\n                                \"Content-Type\": \"application/x-www-form-urlencoded\",\n                            },\n                        });\n\n                        if (!response.ok) throw new Error(`HTTP ${response.status}`);\n\n                        const result = await response.json();\n                        tag.remove();\n                        this.loadPage()\n                        Toast.show(__('Tag supprimé avec succès', 'admin'), {\n                            type: 'success',\n                            icon: '✅',\n                            duration: 5000,\n                            position: 'bottom-right',\n                            closable: true\n                        })\n                    },\n                    () => null,\n                    {\n                        title: __('Supprimer ce tag ?', 'admin'),\n                        message: __('Cette action est irréversible. Êtes-vous sûr de vouloir continuer ?', 'admin'),\n                        confirmText: __('Supprimer', 'admin'),\n                        cancelText: __('Annuler', 'admin'),\n                        confirmClass: 'button danger',\n                        cancelClass: 'button info',\n                    });\n\n                return;\n            }\n\n            if (this.selectTags.includes(id))\n                this.selectTags.splice(this.selectTags.indexOf(id), 1);\n            else\n                this.selectTags.push(id)\n\n            this.updateTags();\n            this.loadPage(1);\n\n        });\n\n        if (this.canUpload) {\n            this.element.addEventListener('dragover', (e) => {\n                e.preventDefault();\n                this.dropZone.classList.add('active');\n            });\n\n            this.element.addEventListener('dragleave', (e) => {\n                if (e.relatedTarget === null || !this.dropZone.contains(e.relatedTarget)) {\n                    this.dropZone.classList.remove('active');\n                }\n            });\n\n            this.element.addEventListener('drop', (e) => {\n                e.preventDefault();\n                this.dropZone.classList.remove('active');\n                const files = [...e.dataTransfer.files];\n                for (let file of files)\n                    this.uploadFile(file);\n            });\n        }\n\n\n        this.element.addEventListener('click', (e) => {\n            const card = e.target.closest('.__media_card');\n            if (card) {\n                try {\n                    const media = JSON.parse(card.dataset.media)\n\n                    if (typeof this.onClickItem === 'function')\n                        this.onClickItem(media);\n\n                    if (this.canModal)\n                        this.modal.open(media)\n                } catch (err) {\n                    Toast.show(__('Erreur de parsing du média :', 'admin') + ' ' + err.message, {\n                        type: 'danger',\n                        icon: '⚠️',\n                        duration: 5000,\n                        position: 'bottom-right',\n                        closable: true\n                    })\n                    console.error(__('Erreur de parsing du média :', 'admin'), err);\n                    return;\n                }\n            }\n        });\n\n    }\n\n    async loadPage(page = 1) {\n        try {\n            const params = new URLSearchParams();\n            params.set('per_page', this.perPage);\n\n            this.selectTags.forEach(tagId => {\n                params.append('tags[]', tagId);\n            });\n\n            if(this.forced_mimeTypes)\n                this.forced_mimeTypes.forEach(mime => {\n                    params.append('mime_types[]', mime);\n                });\n\n            const response = await fetch(\n                `${this.apiUrl}/all/${page}?${params}`\n            );\n\n            if (!response.ok) throw new Error(`HTTP ${response.status}`);\n\n            const result = await response.json();\n            this.renderMedia(result.items);\n            this.renderPagination(result.current_page, result.last_page);\n        } catch (err) {\n            Toast.show('[MediaGalleryLoader] ' + __('Erreur de chargement des médias :', 'admin') + ' ' + err.message, {\n                type: 'danger',\n                icon: '⚠️',\n                duration: 5000,\n                position: 'bottom-right',\n                closable: true\n            })\n            console.error('[MediaGalleryLoader] ' + __('Erreur de chargement des médias :', 'admin'), err);\n        }\n    }\n\n    async loadTags() {\n        try {\n            const response = await fetch(`${this.apiUrl}/tags/all`);\n\n            if (!response.ok) throw new Error(`HTTP ${response.status}`);\n\n            const result = await response.json();\n\n            this.tags = result;\n            this.renderTags();\n        } catch (err) {\n            Toast.show('[MediaGalleryLoader] ' + __('Erreur de chargement des tags :', 'admin') + ' ' + err.message, {\n                type: 'danger',\n                icon: '⚠️',\n                duration: 5000,\n                position: 'bottom-right',\n                closable: true\n            })\n            console.error('[MediaGalleryLoader] ' + __('Erreur de chargement des tags :', 'admin'), err);\n        }\n    }\n\n    async addTag(tag) {\n        try {\n            const response = await fetch(`${this.apiUrl}/tags/add`, {\n                method: 'POST',\n                headers: {\n                    \"Content-Type\": \"application/x-www-form-urlencoded\",\n                },\n                body: 'name=' + encodeURIComponent(tag),\n            });\n\n            if (!response.ok) throw new Error(`HTTP ${response.status}`);\n\n            const result = await response.json();\n\n            this.loadTags();\n        } catch (err) {\n            Toast.show('[MediaGalleryLoader] ' + __(\"Erreur d'ajout de tag :\", 'admin') + ' ' + err.message, {\n                type: 'danger',\n                icon: '⚠️',\n                duration: 5000,\n                position: 'bottom-right',\n                closable: true\n            });\n            console.error('[MediaGalleryLoader] ' + __(\"Erreur d'ajout de tag :\", 'admin'), err);\n        }\n    }\n\n    renderMedia(mediaItems = []) {\n        this.grid.innerHTML = '';\n        mediaItems.forEach(media => {\n            const card = this.createMediaCard(media);\n            this.grid.appendChild(card);\n        });\n    }\n\n    renderPagination(currentPage, lastPage) {\n        this.pagination.innerHTML = '';\n\n        for (let page = 1; page <= lastPage; page++) {\n            const span = document.createElement('span');\n            span.dataset.page = page;\n            span.textContent = page;\n            if (page === currentPage) span.classList.add('active');\n            this.pagination.appendChild(span);\n        }\n    }\n\n    renderTags() {\n        this.tags_content.innerHTML = '';\n        this.tags.forEach(tag => {\n            const span = document.createElement('span');\n            span.dataset.tag = tag.id;\n            span.textContent = tag.name;\n            this.tags_content.appendChild(span);\n        });\n    }\n\n    /*\n        * Met à jour les tags de la galerie de médias. ajouter class active sur les tags sélectionnés\n     */\n    updateTags() {\n        const tags = this.tags_content.querySelectorAll('span[data-tag]');\n        tags.forEach(tag => {\n\n            const id = tag.dataset.tag;\n\n            if (!id) return;\n\n            if (this.search)\n                tag.classList.toggle('hidden', !tag.textContent.toLowerCase().includes(this.search.toLowerCase()));\n\n            if (this.selectTags.includes(id))\n                tag.classList.add('active');\n            else\n                tag.classList.remove('active');\n        });\n    }\n\n    createMediaCard(media) {\n        const div = document.createElement('div');\n        div.className = 'media-card __media_card';\n        div.dataset.id = media.id;\n\n        const isImage = media.mime_type.startsWith('image/');\n\n        div.innerHTML = `\n            <div class=\"media-card--mime\">${media.mime_type}</div>\n            <div class=\"media-card--preview\">\n                ${isImage\n            ? `<img src=\"/${media.path}\" alt=\"${media.original_name}\">`\n            : `<div class=\"media-card--icon\">${this.getIconForMime(media.mime_type)}</div>`}\n            </div>\n            <div class=\"media-card--meta\">\n                <div class=\"name\">${media.original_name}</div>\n                <div class=\"size\">${(media.size / 1024).toFixed(1)} ko</div>\n            </div>\n        `;\n        div.dataset.media = JSON.stringify(media);\n        return div;\n    }\n\n    replaceCardWithMedia(tempCard, media) {\n        const newCard = this.createMediaCard(media);\n        tempCard.replaceWith(newCard);\n    }\n\n    getIconForMime(mime) {\n        if (mime === 'application/pdf') return '📄';\n        if (mime === 'text/plain') return '📃';\n        if (mime.startsWith('video/')) return '🎥';\n        return '📁';\n    }\n\n    uploadFile(file) {\n        const formData = new FormData();\n        formData.append('file', file);\n\n        const tempCard_el = BuildHelper.div('media-card uploading');\n        const preview_el = BuildHelper.div('media-card--preview');\n        const progressBar_el = BuildHelper.div('progress-bar');\n        preview_el.appendChild(this.getPreviewHTML(file));\n        tempCard_el.appendChild(preview_el);\n        tempCard_el.appendChild(progressBar_el);\n        this.grid.prepend(tempCard_el);\n\n        const progressBar = tempCard_el.querySelector('.progress-bar');\n\n        const xhr = new XMLHttpRequest();\n        xhr.open('POST', `${this.apiUrl}/upload`);\n\n        xhr.upload.onprogress = (e) => {\n            const percent = Math.floor((e.loaded / e.total) * 100);\n            progressBar.style.width = percent + '%';\n        };\n\n        xhr.onload = () => {\n            if (xhr.status === 200) {\n                try {\n                    const response = JSON.parse(xhr.responseText);\n                    this.replaceCardWithMedia(tempCard_el, response);\n                } catch (err) {\n\n                    tempCard_el.innerHTML = `<div class=\"error\">❌ ${__('Réponse invalide', 'admin')}</div>`;\n                }\n            } else {\n                tempCard_el.innerHTML = `<div class=\"error\">❌ ${__('Upload échoué', 'admin')}</div>`;\n            }\n        };\n\n        xhr.onerror = () => {\n            tempCard_el.innerHTML = `<div class=\"error\">❌ ${__('Erreur réseau', 'admin')}</div>`;\n        };\n\n        xhr.send(formData);\n    }\n\n    getPreviewHTML(file) {\n        if (file.type.startsWith('image/svg')) {\n            const svg = BuildHelper.img(URL.createObjectURL(file), 'preview');\n            return svg;\n        } else if (file.type.startsWith('image/'))\n            return BuildHelper.img(URL.createObjectURL(file), 'preview');\n\n        const div = BuildHelper.div('media-card--icon');\n        div.innerHTML = this.getIconForMime(file.type);\n\n        return div;\n    }\n}\n","export class Tooltip {\n    static currentTarget = null;\n\n    static setup() {\n        document.addEventListener('mouseover', Tooltip.handleMouseOver);\n        document.addEventListener('mouseout', Tooltip.handleMouseOut);\n        document.addEventListener('mousemove', Tooltip.handleMouseMove);\n    }\n\n    static handleMouseOver(e) {\n        const target = e.target.closest('[data-tooltip]');\n        if (!target || target._bqTooltip) return;\n\n        Tooltip.currentTarget = target;\n        Tooltip.show(target);\n    }\n\n    static handleMouseOut(e) {\n        const target = e.target.closest('[data-tooltip]');\n        if (target && target._bqTooltip) {\n            target._bqTooltip.remove();\n            target._bqTooltip = null;\n        }\n        Tooltip.currentTarget = null;\n    }\n\n    static handleMouseMove(e) {\n        if (Tooltip.currentTarget && Tooltip.currentTarget._bqTooltip) {\n            Tooltip.move(e, Tooltip.currentTarget._bqTooltip);\n        }\n    }\n\n    static show(target) {\n        const text = target.dataset.tooltip;\n        if (!text) return;\n\n        const tooltip = document.createElement('div');\n        tooltip.className = 'bq-tooltip';\n\n        const type = target.dataset.tooltipType;\n        if (type) {\n            tooltip.classList.add(type); // ex: .danger, .info...\n        }\n\n        tooltip.innerHTML = text;\n        document.body.appendChild(tooltip);\n\n        target._bqTooltip = tooltip;\n\n        // Position initiale\n        const fakeEvent = {clientX: 0, clientY: 0, ...window.event};\n        Tooltip.move(fakeEvent, tooltip);\n    }\n\n    static move(e, tooltip) {\n        const offset = 12;\n        const mouseX = e.clientX;\n        const mouseY = e.clientY;\n\n        const tooltipRect = tooltip.getBoundingClientRect();\n        const winWidth = window.innerWidth;\n        const winHeight = window.innerHeight;\n\n        let top = mouseY + offset;\n        let left = mouseX + offset;\n\n        if (mouseX + tooltipRect.width + offset > winWidth) {\n            left = mouseX - tooltipRect.width - offset;\n        }\n\n        if (mouseY + tooltipRect.height + offset > winHeight) {\n            top = mouseY - tooltipRect.height - offset;\n        }\n\n        tooltip.style.left = `${left}px`;\n        tooltip.style.top = `${top}px`;\n    }\n}","import BuildHelper from '@framework/js/components/BuildHelper.js';\n\nexport class DebugPanel {\n    static panel = null;\n    static isDragging = false;\n    static offset = {x: 0, y: 0};\n\n    static async init() {\n        this.panel = BuildHelper.div('debug-panel');\n        const title = BuildHelper.h3('Debug Panel');\n        const close_el = BuildHelper.div('close-btn');\n        close_el.textContent = 'x';\n\n        this.panel.append(title, close_el);\n        document.body.appendChild(this.panel);\n        if (!this.panel) return;\n\n        // Restore position\n        this.restoreFromStorage();\n\n        // Toggle via touche ² (Backquote)\n        document.addEventListener('keypress', (e) => {\n            if (e.which === 178 || e.which === 64) {\n                this.panel.classList.toggle('active');\n                localStorage.setItem('debugPanelActive', this.panel.classList.contains('active'));\n            }\n        });\n\n        // Bouton de fermeture\n        const close = this.panel.querySelector('.close-btn');\n        if (close) {\n            close.addEventListener('click', () => {\n                this.panel.classList.remove('active');\n            });\n        }\n\n        // Dragging\n        this.panel.addEventListener('mousedown', this.startDrag.bind(this));\n        document.addEventListener('mousemove', this.onDrag.bind(this));\n        document.addEventListener('mouseup', this.stopDrag.bind(this));\n\n        await this.loadMetrics();\n    }\n\n    static startDrag(e) {\n        if (!this.panel.classList.contains('active')) return;\n\n        this.isDragging = true;\n        this.offset.x = e.clientX - this.panel.offsetLeft;\n        this.offset.y = e.clientY - this.panel.offsetTop;\n        this.panel.classList.add('dragging');\n        this.panel.style.transition = 'none';\n    }\n\n    static onDrag(e) {\n        if (!this.isDragging) return;\n\n        const x = e.clientX - this.offset.x;\n        const y = e.clientY - this.offset.y;\n\n        this.panel.style.left = `${x}px`;\n        this.panel.style.top = `${y}px`;\n        this.panel.style.bottom = 'auto';\n        this.panel.style.right = 'auto';\n\n        // Sauvegarde position en direct\n        localStorage.setItem('debugPanelPosition', JSON.stringify({x, y}));\n    }\n\n    static stopDrag() {\n        if (this.isDragging) {\n            this.isDragging = false;\n            this.panel.classList.remove('dragging');\n            this.panel.style.transition = '';\n        }\n    }\n\n    static restoreFromStorage() {\n        const isActive = localStorage.getItem('debugPanelActive');\n        this.panel.classList.toggle('active', isActive === 'true');\n\n        const pos = localStorage.getItem('debugPanelPosition');\n        if (!pos) return;\n\n        try {\n            const {x, y} = JSON.parse(pos);\n            this.panel.style.left = `${x}px`;\n            this.panel.style.top = `${y}px`;\n            this.panel.style.bottom = 'auto';\n            this.panel.style.right = 'auto';\n        } catch (e) {\n\n            //set center of the screen\n            const width = window.innerWidth;\n            const height = window.innerHeight;\n            const panelWidth = this.panel.offsetWidth;\n            const panelHeight = this.panel.offsetHeight;\n            const x = (width - panelWidth) / 2;\n            const y = (height - panelHeight) / 2;\n            this.panel.style.left = `${x}px`;\n            this.panel.style.top = `${y}px`;\n            this.panel.style.bottom = 'auto';\n            this.panel.style.right = 'auto';\n        }\n    }\n\n    static async loadMetrics() {\n        await fetch('/admin/api/debug/metrics')\n            .then(r => r.json())\n            .then(data => {\n\n                for (const group_key in data) {\n                    const {accordeon, accordeon_content} = BuildHelper.accordion(group_key);\n                    const wrap = BuildHelper.div('wrap');\n                    accordeon_content.appendChild(wrap);\n                    const items = data[group_key];\n                    for (const item_key in items) {\n                        const item = items[item_key];\n                        const item_div = BuildHelper.div('debug-line');\n                        item_div.innerHTML = `${item_key}: ${item}`;\n                        wrap.appendChild(item_div);\n                    }\n                    this.panel.appendChild(accordeon);\n                }\n            });\n    }\n}\n","import './components/dropdown';\nimport { Accordion } from './components/Accordion.js';\nimport './components/language-switcher';\nimport MediaGallery from './components/MediaGallery';\nimport {Tooltip} from './components/Tooltip.js';\nimport {Translator} from './components/Translator.js';\nimport {DebugPanel} from '@framework/js/components/DebugPanel';\n\n\ndocument.addEventListener('DOMContentLoaded', async () => {\n\n    await Translator.load('admin');\n\n    await DebugPanel.init();\n\n    Accordion.setup();\n\n    Tooltip.setup();\n    const mediaGalleries = document.querySelectorAll('.__media_gallery');\n    mediaGalleries.forEach(gallery => {\n        new MediaGallery(gallery);\n    });\n\n    console.log('%c[Admin] JS chargé avec succès 🛠️', 'color: cyan; font-weight: bold');\n});"],"names":["document","addEventListener","langSelect","getElementById","locale","value","cookie","location","reload","e","target","closest","dropdown","querySelectorAll","forEach","d","classList","remove","toggle","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","Accordion","setup","selector","title","accordeon","content","querySelector","contains","style","maxHeight","scrollHeight","offsetHeight","add","onTransitionEnd","removeEventListener","BuildHelper","accordion","subclass","createElement","className","accordeon_title","textContent","appendChild","accordeon_content","glow_stick","input_text","placeholder","input","type","button_submit","text","button","onClick","div","modal","onClose","this","wrapper","close","h2","h3","img","src","alt","list","items","ul","item","li","innerHTML","search","onSearch","onClickItem","searchMinLength","openBottom","searchContainer","results","length","input_search","onEmpty","Translator","static","load","domain","_loaded","response","fetch","ok","Error","data","json","_domains","error","console","message","translate","key","replacements","trim","translation","_applyReplacements","t","str","replace","match","token","__","ConfirmDialog","show","onConfirm","onCancel","options","defaults","confirmText","cancelText","confirmClass","cancelClass","title_el","overlay_el","box_el","message_el","actions_el","confirm_el","cancel_el","append","body","setTimeout","Toast","Map","position","duration","icon","closable","container","_getContainer","toast","_removeToast","requestAnimationFrame","containers","has","set","get","MediaModalViewer","constructor","gallery","waitingTags","deletionMode","new_tag","loadPage","modal_content","open","media","tags","JSON","parse","stringify","buildActions","buildPreview","info","infoContainer","original_name","infoSub","mime_type","size","toFixed","extension","Date","created_at","toLocaleDateString","buildTagEditor","exif","Object","keys","exifList","entries","map","buildTagUpdateButton","dataset","tooltip","tooltipType","onclick","async","encoded","tag","id","encodeURIComponent","join","tagDeleteBtn","res","apiUrl","method","headers","status","new","updateTagList","updateTagButtonVisibility","err","buildTagDeleteToggle","newTags","filter","push","buildAddCategoryButton","find","name","toLowerCase","dispatchEvent","Event","tagAddBtn","renderTags","tagsContainer","tagList","tagActions","tagUpdateBtn","waitingTagIds","mediaTagIds","some","includes","tagEl","result","results_el","filtered","tagId","parseInt","actions","dl","blob","path","url","URL","createObjectURL","link","href","download","click","removeChild","window","del","preview","startsWith","svg","getIconForMime","MediaGallery","element","canUpload","canModal","canEditTags","perPage","selectTags","mimeTypes","forced_mimeTypes","isNaN","forcedMimeTypes","split","mime","buildElements","initEvents","loadTags","dropZone","tags_form","tag_input","tag_submit","preventDefault","updateTags","addTag","tags_actions","tags_content","grid","pagination","index","page","splice","indexOf","relatedTarget","files","dataTransfer","file","uploadFile","card","params","URLSearchParams","renderMedia","renderPagination","current_page","last_page","mediaItems","createMediaCard","currentPage","lastPage","span","isImage","replaceCardWithMedia","tempCard","newCard","replaceWith","formData","FormData","tempCard_el","preview_el","progressBar_el","getPreviewHTML","prepend","progressBar","xhr","XMLHttpRequest","upload","onprogress","percent","Math","floor","loaded","total","width","onload","responseText","onerror","send","Tooltip","handleMouseOver","handleMouseOut","handleMouseMove","_bqTooltip","currentTarget","move","fakeEvent","clientX","clientY","event","offset","mouseX","mouseY","tooltipRect","getBoundingClientRect","winWidth","innerWidth","winHeight","innerHeight","top","left","height","DebugPanel","x","y","init","panel","close_el","restoreFromStorage","which","localStorage","setItem","startDrag","bind","onDrag","stopDrag","loadMetrics","isDragging","offsetLeft","offsetTop","transition","bottom","right","isActive","getItem","pos","offsetWidth","then","r","group_key","wrap","item_key","item_div","log"],"sourceRoot":""}